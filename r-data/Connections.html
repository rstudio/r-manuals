<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>7&nbsp; Connections ¶ – R Manuals :: R Data Import/Export ¶</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Network-interfaces.html" rel="next">
<link href="./Image-files.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-615e5a4a6112f5242531a7184a6a2cac.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">R Manuals :: R Data Import/Export ¶</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-manuals" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Manuals</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-manuals">    
        <li>
    <a class="dropdown-item" href="./../r-intro/index.html">
 <span class="dropdown-text">An Introduction to R ¶</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-data/index.html">
 <span class="dropdown-text">R Data Import/Export ¶</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-admin/index.html">
 <span class="dropdown-text">R Installation and Administration ¶</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-exts/index.html">
 <span class="dropdown-text">Writing R Extensions ¶</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-lang/index.html">
 <span class="dropdown-text">R Language Definition ¶</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-ints/index.html">
 <span class="dropdown-text">R Internals ¶</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Connections.html"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Connections </span></a><a href="#connections-1" class="copiable-link">¶</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Top (R Data Import/Export)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Acknowledgements.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Acknowledgements </span></a><a href="#acknowledgements-1" class="copiable-link">¶</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction </span></span></a><a href="#introduction-1" class="copiable-link">¶</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Spreadsheet-like-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Spreadsheet-like data </span></span></a><a href="#spreadsheet-like-data-1" class="copiable-link">¶</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Importing-from-other-statistical-systems.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Importing from other statistical systems </span></span></a><a href="#importing-from-other-statistical-systems-1" class="copiable-link">¶</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Relational-databases.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Relational databases </span></span></a><a href="#relational-databases-1" class="copiable-link">¶</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Binary-files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Binary files </span></span></a><a href="#binary-files-1" class="copiable-link">¶</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Image-files.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Image files </span></span></a><a href="#image-files-1" class="copiable-link">¶</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Connections.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Connections </span></span></a><a href="#connections-1" class="copiable-link">¶</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Network-interfaces.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Network interfaces </span></span></a><a href="#network-interfaces-1" class="copiable-link">¶</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Reading-Excel-spreadsheets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Reading Excel spreadsheets </span></span></a><a href="#reading-excel-spreadsheets-1" class="copiable-link">¶</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./References.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References </span></a><a href="#references-1" class="copiable-link">¶</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Function-and-variable-index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Function and variable index </span></a><a href="#function-and-variable-index-1" class="copiable-link">¶</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Concept-index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concept index </span></a><a href="#concept-index-1" class="copiable-link">¶</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#types-of-connections" id="toc-types-of-connections" class="nav-link active" data-scroll-target="#types-of-connections"><span class="header-section-number">7.1</span> Types of connections ¶</a></li>
  <li><a href="#output-to-connections" id="toc-output-to-connections" class="nav-link" data-scroll-target="#output-to-connections"><span class="header-section-number">7.2</span> Output to connections ¶</a></li>
  <li><a href="#input-from-connections" id="toc-input-from-connections" class="nav-link" data-scroll-target="#input-from-connections"><span class="header-section-number">7.3</span> Input from connections ¶</a>
  <ul class="collapse">
  <li><a href="#pushback" id="toc-pushback" class="nav-link" data-scroll-target="#pushback"><span class="header-section-number">7.3.1</span> Pushback ¶</a></li>
  </ul></li>
  <li><a href="#listing-and-manipulating-connections" id="toc-listing-and-manipulating-connections" class="nav-link" data-scroll-target="#listing-and-manipulating-connections"><span class="header-section-number">7.4</span> Listing and manipulating connections ¶</a></li>
  <li><a href="#binary-connections" id="toc-binary-connections" class="nav-link" data-scroll-target="#binary-connections"><span class="header-section-number">7.5</span> Binary connections ¶</a>
  <ul class="collapse">
  <li><a href="#special-values" id="toc-special-values" class="nav-link" data-scroll-target="#special-values"><span class="header-section-number">7.5.1</span> Special values ¶</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Connections <a href="#connections-1" class="copiable-link">¶</a></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Next: <a href="Network-interfaces.html#network-interfaces" accesskey="n" rel="next">Network interfaces</a>, Previous: <a href="Image-files.html" accesskey="p" rel="prev">Image files</a>, Up: <a href="index.html" accesskey="u" rel="up">R Data Import/Export</a> &nbsp; [<a href="index.html#sec_contents" rel="contents" title="Table of contents">Contents</a>][<a href="Function-and-variable-index.html" rel="index" title="Index">Index</a>]</p>
<p><em>Connections</em> are used in R in the sense of Chambers (1998) and Ripley (2001), a set of functions to replace the use of file names by a flexible interface to file-like objects.</p>
<section id="types-of-connections" class="level2 section" data-number="7.1">
<h2 class="section anchored" data-number="7.1" data-anchor-id="types-of-connections"><span class="header-section-number">7.1</span> Types of connections <a href="#types-of-connections-1" class="copiable-link">¶</a></h2>
<p>The most familiar type of connection will be a file, and file connections are created by function <code class="code">file</code>. File connections can (if the OS will allow it for the particular file) be opened for reading or writing or appending, in text or binary mode. In fact, files can be opened for both reading and writing, and R keeps a separate file position for reading and writing.</p>
<p>Note that by default a connection is not opened when it is created. The rule is that a function using a connection should open a connection (needed) if the connection is not already open, and close a connection after use if it opened it. In brief, leave the connection in the state you found it in. There are generic functions <code class="code">open</code> and <code class="code">close</code> with methods to explicitly open and close connections.</p>
<p>Files compressed via the algorithm used by <code class="code">gzip</code> can be used as connections created by the function <code class="code">gzfile</code>, whereas files compressed by <code class="code">bzip2</code> can be used via <code class="code">bzfile</code>.</p>
<p><span id="index-Terminal-connections" class="index-entry-id"></span> <span id="index-stdin" class="index-entry-id"></span> <span id="index-stdout" class="index-entry-id"></span> <span id="index-stderr" class="index-entry-id"></span></p>
<p>Unix programmers are used to dealing with special files <code class="code">stdin</code>, <code class="code">stdout</code> and <code class="code">stderr</code>. These exist as <em>terminal connections</em> in R. They may be normal files, but they might also refer to input from and output to a GUI console. (Even with the standard Unix R interface, <code class="code">stdin</code> refers to the lines submitted from <code class="code">readline</code> rather than a file.)</p>
<p>The three terminal connections are always open, and cannot be opened or closed. <code class="code">stdout</code> and <code class="code">stderr</code> are conventionally used for normal output and error messages respectively. They may normally go to the same place, but whereas normal output can be re-directed by a call to <code class="code">sink</code>, error output is sent to <code class="code">stderr</code> unless re-directed by <code class="code">sink, type="message")</code>. Note carefully the language used here: the connections cannot be re-directed, but output can be sent to other connections.</p>
<p><span id="index-Text-connections" class="index-entry-id"></span> <span id="index-textConnection" class="index-entry-id"></span></p>
<p><em>Text connections</em> are another source of input. They allow R character vectors to be read as if the lines were being read from a text file. A text connection is created and opened by a call to <code class="code">textConnection</code>, which copies the current contents of the character vector to an internal buffer at the time of creation.</p>
<p>Text connections can also be used to capture R output to a character vector. <code class="code">textConnection</code> can be asked to create a new character object or append to an existing one, in both cases in the user’s workspace. The connection is opened by the call to <code class="code">textConnection</code>, and at all times the complete lines output to the connection are available in the R object. Closing the connection writes any remaining output to a final element of the character vector.</p>
<p><span id="index-Pipe-connections" class="index-entry-id"></span> <span id="index-pipe" class="index-entry-id"></span></p>
<p><em>Pipes</em> are a special form of file that connects to another process, and pipe connections are created by the function <code class="code">pipe</code>. Opening a pipe connection for writing (it makes no sense to append to a pipe) runs an OS command, and connects its standard input to whatever R then writes to that connection. Conversely, opening a pipe connection for input runs an OS command and makes its standard output available for R input from that connection.</p>
<p><span id="index-URL-connections" class="index-entry-id"></span> <span id="index-url" class="index-entry-id"></span></p>
<p>URLs of types <samp class="samp">http://</samp>‘, <samp class="samp">https://</samp>’, <samp class="samp">ftp://</samp>’ and <samp class="samp">file://</samp>’ can be read from using the function <code class="code">url</code>. For convenience, <code class="code">file</code> will also accept these as the file specification and call <code class="code">url</code>.</p>
<p><span id="index-Sockets" class="index-entry-id"></span> <span id="index-socketConnection" class="index-entry-id"></span></p>
<p>Sockets can also be used as connections via function <code class="code">socketConnection</code> on platforms which support Berkeley-like sockets (most Unix systems, Linux and Windows). Sockets can be written to or read from, and both client and server sockets can be used.</p>
</section>
<section id="output-to-connections" class="level2 section" data-number="7.2">
<h2 class="section anchored" data-number="7.2" data-anchor-id="output-to-connections"><span class="header-section-number">7.2</span> Output to connections <a href="#output-to-connections-1" class="copiable-link">¶</a></h2>
<p><span id="index-Connections-2" class="index-entry-id"></span> <span id="index-cat-1" class="index-entry-id"></span> <span id="index-write-1" class="index-entry-id"></span> <span id="index-write_002etable-1" class="index-entry-id"></span> <span id="index-sink-1" class="index-entry-id"></span></p>
<p>We have described functions <code class="code">cat</code>, <code class="code">write</code>, <code class="code">write.table</code> and <code class="code">sink</code> as writing to a file, possibly appending to a file if argument <code class="code">append = TRUE</code>, and this is what they did prior to R version 1.2.0.</p>
<p>The current behaviour is equivalent, but what actually happens is that when the <code class="code">file</code> argument is a character string, a file connection is opened (for writing or appending) and closed again at the end of the function call. If we want to repeatedly write to the same file, it is more efficient to explicitly declare and open the connection, and pass the connection object to each call to an output function. This also makes it possible to write to pipes, which was implemented earlier in a limited way via the syntax <code class="code">file = "|cmd"</code> (which can still be used).</p>
<p>There is a function <code class="code">writeLines</code> to write complete text lines to a connection.</p>
<p>Some simple examples are</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>zz <span class="op">&lt;-</span> file<span class="op">(</span><span class="st">"ex.data"</span><span class="op">,</span> <span class="st">"w"</span><span class="op">)</span>  # open an output file connection</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>cat<span class="op">(</span><span class="st">"TITLE extra line"</span><span class="op">,</span> <span class="st">"2 3 5 7"</span><span class="op">,</span> <span class="st">""</span><span class="op">,</span> <span class="st">"11 13 17"</span><span class="op">,</span> </span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    file <span class="op">=</span> zz<span class="op">,</span> sep <span class="op">=</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">)</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>cat<span class="op">(</span><span class="st">"One more line</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> file <span class="op">=</span> zz<span class="op">)</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>close<span class="op">(</span>zz<span class="op">)</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er"># convert decimal point to comma in output, using a pipe (Unix)</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er"># both R strings and (probably) the shell need \ doubled</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>zz <span class="op">&lt;-</span> pipe<span class="op">(</span>paste<span class="op">(</span><span class="st">"sed s/</span><span class="sc">\\\\</span><span class="st">./,/ &gt;"</span><span class="op">,</span> <span class="st">"outfile"</span><span class="op">),</span> <span class="st">"w"</span><span class="op">)</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>cat<span class="op">(</span>format<span class="op">(</span>round<span class="op">(</span>rnorm<span class="op">(</span><span class="dv">100</span><span class="op">),</span> <span class="dv">4</span><span class="op">)),</span> sep <span class="op">=</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">,</span> file <span class="op">=</span> zz<span class="op">)</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>close<span class="op">(</span>zz<span class="op">)</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er"># now look at the output file:</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>file<span class="op">.</span>show<span class="op">(</span><span class="st">"outfile"</span><span class="op">,</span> delete<span class="op">.</span>file <span class="op">=</span> TRUE<span class="op">)</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er"># capture R output: use examples from help(lm)</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>zz <span class="op">&lt;-</span> textConnection<span class="op">(</span><span class="st">"ex.lm.out"</span><span class="op">,</span> <span class="st">"w"</span><span class="op">)</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>sink<span class="op">(</span>zz<span class="op">)</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>example<span class="op">(</span>lm<span class="op">,</span> prompt<span class="op">.</span>echo <span class="op">=</span> <span class="st">"&gt; "</span><span class="op">)</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>sink<span class="op">()</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>close<span class="op">(</span>zz<span class="op">)</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er"># now `ex.lm.out' contains the output for further processing.</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er"># Look at it by, e.g.,</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>cat<span class="op">(</span>ex<span class="op">.</span>lm<span class="op">.</span>out<span class="op">,</span> sep <span class="op">=</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="input-from-connections" class="level2 section" data-number="7.3">
<h2 class="section anchored" data-number="7.3" data-anchor-id="input-from-connections"><span class="header-section-number">7.3</span> Input from connections <a href="#input-from-connections-1" class="copiable-link">¶</a></h2>
<p><span id="index-scan-2" class="index-entry-id"></span> <span id="index-read_002etable-1" class="index-entry-id"></span> <span id="index-readLines-1" class="index-entry-id"></span></p>
<p>The basic functions to read from connections are <code class="code">scan</code> and <code class="code">readLines</code>. These take a character string argument and open a file connection for the duration of the function call, but explicitly opening a file connection allows a file to be read sequentially in different formats.</p>
<p>Other functions that call <code class="code">scan</code> can also make use of connections, in particular <code class="code">read.table</code>.</p>
<p>Some simple examples are</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">## read in file created in last examples</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">readLines</span>(<span class="st">"ex.data"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">unlink</span>(<span class="st">"ex.data"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="do">## read listing of current directory (Unix)</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">readLines</span>(<span class="fu">pipe</span>(<span class="st">"ls -1"</span>))</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># remove trailing commas from an input file.</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Suppose we are given a file `data' containing</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="dv">450</span>, <span class="dv">390</span>, <span class="dv">467</span>, <span class="dv">654</span>,  <span class="dv">30</span>, <span class="dv">542</span>, <span class="dv">334</span>, <span class="dv">432</span>, <span class="dv">421</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="dv">357</span>, <span class="dv">497</span>, <span class="dv">493</span>, <span class="dv">550</span>, <span class="dv">549</span>, <span class="dv">467</span>, <span class="dv">575</span>, <span class="dv">578</span>, <span class="dv">342</span>,</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="dv">446</span>, <span class="dv">547</span>, <span class="dv">534</span>, <span class="dv">495</span>, <span class="dv">979</span>, <span class="dv">479</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Then read this by</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="fu">scan</span>(<span class="fu">pipe</span>(<span class="st">"sed -e s/,$// data"</span>), <span class="at">sep=</span><span class="st">","</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For convenience, if the <code class="code">file</code> argument specifies a FTP, HTTP or HTTPS URL, the URL is opened for reading via <code class="code">url</code>. Specifying files via <samp class="samp">file://foo.bar</samp>’ is also allowed.</p>
<section id="pushback" class="level3 subsection" data-number="7.3.1">
<h3 class="subsection anchored" data-number="7.3.1" data-anchor-id="pushback"><span class="header-section-number">7.3.1</span> Pushback <a href="#pushback-1" class="copiable-link">¶</a></h3>
<p>C programmers may be familiar with the <code class="code">ungetc</code> function to push back a character onto a text input stream. R connections have the same idea in a more powerful way, in that an (essentially) arbitrary number of lines of text can be pushed back onto a connection via a call to <code class="code">pushBack</code>.</p>
<p>Pushbacks operate as a stack, so a read request first uses each line from the most recently pushbacked text, then those from earlier pushbacks and finally reads from the connection itself. Once a pushbacked line is read completely, it is cleared. The number of pending lines pushed back can be found via a call to <code class="code">pushBackLength</code>.</p>
<p>A simple example will show the idea.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> zz <span class="ot">&lt;-</span> <span class="fu">textConnection</span>(LETTERS)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">readLines</span>(zz, <span class="dv">2</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"A"</span> <span class="st">"B"</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">scan</span>(zz, <span class="st">""</span>, <span class="dv">4</span>)</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>Read <span class="dv">4</span> items</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"C"</span> <span class="st">"D"</span> <span class="st">"E"</span> <span class="st">"F"</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">pushBack</span>(<span class="fu">c</span>(<span class="st">"aa"</span>, <span class="st">"bb"</span>), zz)</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">scan</span>(zz, <span class="st">""</span>, <span class="dv">4</span>)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>Read <span class="dv">4</span> items</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"aa"</span> <span class="st">"bb"</span> <span class="st">"G"</span>  <span class="st">"H"</span> </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">close</span>(zz)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Pushback is only available for connections opened for input in text mode.</p>
</section>
</section>
<section id="listing-and-manipulating-connections" class="level2 section" data-number="7.4">
<h2 class="section anchored" data-number="7.4" data-anchor-id="listing-and-manipulating-connections"><span class="header-section-number">7.4</span> Listing and manipulating connections <a href="#listing-and-manipulating-connections-1" class="copiable-link">¶</a></h2>
<p><span id="index-Connections-3" class="index-entry-id"></span> <span id="index-showConnections" class="index-entry-id"></span></p>
<p>A summary of all the connections currently opened by the user can be found by <code class="code">showConnections()</code>, and a summary of all connections, including closed and terminal connections, by <code class="code">showConnections(all = TRUE)</code></p>
<p>The generic function <code class="code">seek</code> can be used to read and (on some connections) reset the current position for reading or writing. Unfortunately it depends on OS facilities which may be unreliable (e.g. with text files under Windows). Function <code class="code">isSeekable</code> reports if <code class="code">seek</code> can change the position on the connection given by its argument.</p>
<p>The function <code class="code">truncate</code> can be used to truncate a file opened for writing at its current position. It works only for <code class="code">file</code> connections, and is not implemented on all platforms.</p>
</section>
<section id="binary-connections" class="level2 section" data-number="7.5">
<h2 class="section anchored" data-number="7.5" data-anchor-id="binary-connections"><span class="header-section-number">7.5</span> Binary connections <a href="#binary-connections-1" class="copiable-link">¶</a></h2>
<p><span id="index-Binary-files-1" class="index-entry-id"></span> <span id="index-readBin" class="index-entry-id"></span> <span id="index-writeBin" class="index-entry-id"></span></p>
<p>Functions <code class="code">readBin</code> and <code class="code">writeBin</code> read to and write from binary connections. A connection is opened in binary mode by appending <code class="code">"b"</code> to the mode specification, that is using mode <code class="code">"rb"</code> for reading, and mode <code class="code">"wb"</code> or <code class="code">"ab"</code> (where appropriate) for writing. The functions have arguments</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readBin</span>(con, what, <span class="at">n =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="cn">NA</span>, <span class="at">endian =</span> .Platform<span class="sc">$</span>endian) </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">writeBin</span>(object, con, <span class="at">size =</span> <span class="cn">NA</span>, <span class="at">endian =</span> .Platform<span class="sc">$</span>endian) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In each case <code class="code">con</code> is a connection which will be opened if necessary for the duration of the call, and if a character string is given it is assumed to specify a file name.</p>
<p>It is slightly simpler to describe writing, so we will do that first. <code class="code">object</code> should be an atomic vector object, that is a vector of mode <code class="code">numeric</code>, <code class="code">integer</code>, <code class="code">logical</code>, <code class="code">character</code>, <code class="code">complex</code> or <code class="code">raw</code>, without attributes. By default this is written to the file as a stream of bytes exactly as it is represented in memory.</p>
<p><code class="code">readBin</code> reads a stream of bytes from the file and interprets them as a vector of mode given by <code class="code">what</code>. This can be either an object of the appropriate mode (e.g.&nbsp;<code class="code">what=integer()</code>) or a character string describing the mode (one of the five given in the previous paragraph or <code class="code">"double"</code> or <code class="code">"int"</code>). Argument <code class="code">n</code> specifies the maximum number of vector elements to read from the connection: if fewer are available a shorter vector will be returned. Argument <code class="code">signed</code> allows 1-byte and 2-byte integers to be read as signed (the default) or unsigned integers.</p>
<p>The remaining two arguments are used to write or read data for interchange with another program or another platform. By default binary data is transferred directly from memory to the connection or <em>vice versa</em>. This will not suffice if the data are to be transferred to a machine with a different architecture, but between almost all R platforms the only change needed is that of byte-order. Common PCs (<samp class="samp">ix86</samp>‘-based and <samp class="samp">x86_64</samp>’-based machines), Compaq Alpha and Vaxen are <em>little-endian</em>, whereas Sun Sparc, mc680x0 series, IBM R6000, SGI and most others are <em>big-endian</em>. (Network byte-order (as used by XDR, eXternal Data Representation) is big-endian.) To transfer to or from other programs we may need to do more, for example to read 16-bit integers or write single-precision real numbers. This can be done using the <code class="code">size</code> argument, which (usually) allows sizes 1, 2, 4, 8 for integers and logicals, and sizes 4, 8 and perhaps 12 or 16 for reals. Transferring at different sizes can lose precision, and should not be attempted for vectors containing <code class="code">NA</code>’s.</p>
<p>Character strings are read and written in C format, that is as a string of bytes terminated by a zero byte. Functions <code class="code">readChar</code> and <code class="code">writeChar</code> provide greater flexibility.</p>
<section id="special-values" class="level3 subsection" data-number="7.5.1">
<h3 class="subsection anchored" data-number="7.5.1" data-anchor-id="special-values"><span class="header-section-number">7.5.1</span> Special values <a href="#special-values-1" class="copiable-link">¶</a></h3>
<p>Functions <code class="code">readBin</code> and <code class="code">writeBin</code> will pass missing and special values, although this should not be attempted if a size change is involved.</p>
<p>The missing value for R logical and integer types is <code class="code">INT_MIN</code>, the smallest representable <code class="code">int</code> defined in the C header <samp class="file">limits.h</samp>, normally corresponding to the bit pattern <code class="code">0x80000000</code>.</p>
<p>The representation of the special values for R numeric and complex types is machine-dependent, and possibly also compiler-dependent. The simplest way to make use of them is to link an external application against the standalone <code class="code">Rmath</code> library which exports double constants <code class="code">NA_REAL</code>, <code class="code">R_PosInf</code> and <code class="code">R_NegInf</code>, and include the header <samp class="file">Rmath.h</samp> which defines the macros <code class="code">ISNAN</code> and <code class="code">R_FINITE</code>.</p>
<p>If that is not possible, on all current platforms IEC&nbsp;60559 (aka IEEE&nbsp;754) arithmetic is used, so standard C facilities can be used to test for or set <code class="code">Inf</code>, <code class="code">-Inf</code> and <code class="code">NaN</code> values. On such platforms <code class="code">NA</code> is represented by the <code class="code">NaN</code> value with low-word <code class="code">0x7a2</code> (1954 in decimal).</p>
<p>Character missing values are written as <code class="code">NA</code>, and there are no provision to recognize character values as missing (as this can be done by re-assigning them once read).</p>
<p>Next: <a href="Network-interfaces.html#network-interfaces" accesskey="n" rel="next">Network interfaces</a>, Previous: <a href="Image-files.html" accesskey="p" rel="prev">Image files</a>, Up: <a href="index.html" accesskey="u" rel="up">R Data Import/Export</a> &nbsp; [<a href="index.html#sec_contents" rel="contents" title="Table of contents">Contents</a>][<a href="Function-and-variable-index.html" rel="index" title="Index">Index</a>]</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Image-files.html" class="pagination-link" aria-label="Image files [¶](#image-files-1){.copiable-link}">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Image files </span></span></a><a href="#image-files-1" class="copiable-link">¶</a>
                
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Network-interfaces.html" class="pagination-link" aria-label="Network interfaces [¶](#network-interfaces-1){.copiable-link}">
        <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Network interfaces </span></span></a><a href="#network-interfaces-1" class="copiable-link">¶</a> <i class="bi bi-arrow-right-short"></i>
      
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>A re-styled version of the original R manuals at <a href="https://cran.r-project.org/manuals.html" class="uri">https://cran.r-project.org/manuals.html</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Built using <a href="https://quarto.org">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>