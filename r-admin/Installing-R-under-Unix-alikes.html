<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>2&nbsp; Installing R under Unix-alikes – R Manuals :: R Installation and Administration</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Installing-R-under-Windows.html" rel="next">
<link href="./Obtaining-R.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-e26003cea8cd680ca0c55a263523d882.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-4f73ddde9a6e7a521cd13563a713d023.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">R Manuals :: R Installation and Administration</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-manuals" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Manuals</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-manuals">    
        <li>
    <a class="dropdown-item" href="./../r-intro/index.html">
 <span class="dropdown-text">An Introduction to R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-data/index.html">
 <span class="dropdown-text">R Data Import/Export</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-admin/index.html">
 <span class="dropdown-text">R Installation and Administration</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-exts/index.html">
 <span class="dropdown-text">Writing R Extensions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-lang/index.html">
 <span class="dropdown-text">R Language Definition</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-ints/index.html">
 <span class="dropdown-text">R Internals</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Installing-R-under-Unix-alikes.html"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Installing R under Unix-alikes</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">R Installation and Administration</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Obtaining-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Obtaining R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Installing-R-under-Unix-alikes.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Installing R under Unix-alikes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Installing-R-under-Windows.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Installing R under Windows</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Installing-R-under-macOS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Installing R under macOS</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Running-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Running R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Add-on-packages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Add-on packages</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Internationalization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Internationalization and Localization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Choosing-between-32--and-64-bit-builds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Choosing between 32- and 64-bit builds</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./The-standalone-Rmath-library.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">The standalone Rmath library</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Function-and-variable-index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Function and variable index</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Concept-index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concept index</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Environment-variable-index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Environment variable index</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Essential-and-useful-other-programs-under-a-Unix-alike.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Essential and useful other programs under a Unix-alike</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Configuration-on-a-Unix-alike.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Configuration on a Unix-alike</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Platform-notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Platform notes</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#simple-compilation" id="toc-simple-compilation" class="nav-link active" data-scroll-target="#simple-compilation"><span class="header-section-number">2.1</span> Simple compilation</a></li>
  <li><a href="#help-options" id="toc-help-options" class="nav-link" data-scroll-target="#help-options"><span class="header-section-number">2.2</span> Help options</a></li>
  <li><a href="#making-the-manuals" id="toc-making-the-manuals" class="nav-link" data-scroll-target="#making-the-manuals"><span class="header-section-number">2.3</span> Making the manuals</a></li>
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation"><span class="header-section-number">2.4</span> Installation</a></li>
  <li><a href="#uninstallation" id="toc-uninstallation" class="nav-link" data-scroll-target="#uninstallation"><span class="header-section-number">2.5</span> Uninstallation</a></li>
  <li><a href="#sub-architectures" id="toc-sub-architectures" class="nav-link" data-scroll-target="#sub-architectures"><span class="header-section-number">2.6</span> Sub-architectures</a></li>
  <li><a href="#other-options" id="toc-other-options" class="nav-link" data-scroll-target="#other-options"><span class="header-section-number">2.7</span> Other Options</a>
  <ul class="collapse">
  <li><a href="#debugging-symbols" id="toc-debugging-symbols" class="nav-link" data-scroll-target="#debugging-symbols"><span class="header-section-number">2.7.1</span> Debugging Symbols</a></li>
  <li><a href="#openmp-support" id="toc-openmp-support" class="nav-link" data-scroll-target="#openmp-support"><span class="header-section-number">2.7.2</span> OpenMP Support</a></li>
  <li><a href="#c-support" id="toc-c-support" class="nav-link" data-scroll-target="#c-support"><span class="header-section-number">2.7.3</span> C++ Support</a></li>
  <li><a href="#c-standards" id="toc-c-standards" class="nav-link" data-scroll-target="#c-standards"><span class="header-section-number">2.7.4</span> C standards</a></li>
  <li><a href="#link-time-optimization" id="toc-link-time-optimization" class="nav-link" data-scroll-target="#link-time-optimization"><span class="header-section-number">2.7.5</span> Link-Time Optimization</a></li>
  <li><a href="#lto-with-gcc" id="toc-lto-with-gcc" class="nav-link" data-scroll-target="#lto-with-gcc"><span class="header-section-number">2.7.6</span> LTO with GCC</a></li>
  <li><a href="#lto-with-llvm" id="toc-lto-with-llvm" class="nav-link" data-scroll-target="#lto-with-llvm"><span class="header-section-number">2.7.7</span> LTO with LLVM</a></li>
  <li><a href="#lto-for-package-checking" id="toc-lto-for-package-checking" class="nav-link" data-scroll-target="#lto-for-package-checking"><span class="header-section-number">2.7.8</span> LTO for package checking</a></li>
  </ul></li>
  <li><a href="#testing-an-installation" id="toc-testing-an-installation" class="nav-link" data-scroll-target="#testing-an-installation"><span class="header-section-number">2.8</span> Testing an Installation</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Installing R under Unix-alikes</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>R will configure and build under most common Unix and Unix-alike platforms including <code>cpu-*-linux-gnu</code> for the <code>alpha</code>, <code>arm64</code> (also known as <code>aarch64</code>, <code>ix86</code>, <code>mips</code>, <code>mipsel</code>#, <code>ppc64</code>, <code>riscv64</code>, <code>s390x</code>, <code>sparc64</code>, and <code>x86_64</code> CPUs, <code>aarch64-apple-darwin</code><a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> and <code>x86_64-apple-darwin</code> as well as perhaps (it is tested less frequently on these platforms) <code>x86_64-*-freebsd</code>, <code>x86_64-*-openbsd</code> and <code>powerpc-ibm-aix6*</code></p>
<div class="no-row-height column-margin column-container"><div id="fn1"><p><sup>1</sup>&nbsp;aka ‘Apple Silicon’, known to some as <code>arm64-apple-darwin</code>.</p></div></div><p>Only 64-bit platforms are tested regularly, and <code>configure</code> will warn if it encounters a 32-bit one.</p>
<p>In addition, binary distributions are available for some common Linux distributions (see the FAQ for current details) and for macOS. These are installed in platform-specific ways, so for the rest of this chapter we consider only building from the sources.</p>
<p>Cross-building is not possible: installing R builds a minimal version of R and then runs many R scripts to complete the build.</p>
<section id="simple-compilation" class="level2 section page-columns page-full" data-number="2.1">
<h2 class="section anchored" data-number="2.1" data-anchor-id="simple-compilation"><span class="header-section-number">2.1</span> Simple compilation</h2>
<p>First review the essential and useful tools and libraries in <a href="Essential-and-useful-other-programs-under-a-Unix-alike.html#essential-and-useful-other-programs-under-a-unix-alike">Essential and useful other programs under a Unix-alike</a>, and install those you want or need. Ensure that either the environment variable <code>TMPDIR</code> is either unset (and <code>/tmp</code> exists and can be written in and scripts can be executed from) or points to the absolute path to a valid temporary directory (one from which execution of scripts is allowed) which does not contain spaces.</p>
<p>Choose a directory to install the R tree (R is not just a binary, but has additional data sets, help files, font metrics etc). Let us call this place <code>R_HOME</code>. Untar the source code. This should create directories <code>src</code>, <code>doc</code>, and several more under a top-level directory: change to that top-level directory (At this point North American readers should consult <a href="Configuration-on-a-Unix-alike.html#setting-paper-size">Setting paper size</a>.) Issue the following commands:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>.<span class="sc">/</span>configure</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>make</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(See <a href="Configuration-on-a-Unix-alike.html#using-make">Using make</a> if your make is not called <code>make</code>.) Users of Debian-based 64-bit systems<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> may need</p>
<div class="no-row-height column-margin column-container"><div id="fn2"><p><sup>2</sup>&nbsp;which use <code>lib</code> rather than <code>lib64</code> for their primary 64-bit library directories: attempts are made to detect such systems.</p></div></div><div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>.<span class="sc">/</span>configure LIBnn<span class="ot">=</span>lib</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>make</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Then check the built system works correctly by</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>make check</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Failures are not necessarily problems as they might be caused by missing functionality, but you should look carefully at any reported discrepancies. (Some non-fatal errors are expected in locales that do not support Latin-1, in particular in true <code>C</code> locales and non-UTF-8 non-Western-European locales.) A failure in <code>tests/ok-errors.R</code> may indicate inadequate resource limits (see <a href="Running-R.html">Running R</a>).</p>
<p>More comprehensive testing can be done by</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>make check<span class="sc">-</span>devel</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>or</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>make check<span class="sc">-</span>all</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>see <a href="#testing-a-unix-alike-installation">Testing an Installation</a> for the possibilities of doing this in parallel. Note that these checks are only run completely if the recommended packages are installed. If you have a local CRAN mirror, these checks can be speeded up by either setting environment variable <code>R_CRAN_WEB</code> to its URL, or having a file <code>.R/repositories</code> specifying it (see <code>?setRepositories</code>).</p>
<p><code>make check-devel</code> checks the included packages’ <code>tests</code> directories. For <strong>grDevices</strong> more complete checks will be run if the environment variable <code>R_GRDEVICES_COMPARE_PS_PDF</code> is set: those checks are skipped on platforms using <code>musl</code> such as Alpine Linux, and it knows about differences from transliterations in macOS 14 and later.</p>
<p>Parallel make is supported for building R but not for the <code>check</code> targets (as the output is likely to be unreadably interleaved, although where supported<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> GNU make’s <code>-O</code> may help).</p>
<div class="no-row-height column-margin column-container"><div id="fn3"><p><sup>3</sup>&nbsp;not by the version supplied by macOS.</p></div></div><p>If the <code>configure</code> and <code>make</code> commands execute successfully, a shell-script front-end called <code>R</code> will be created and copied to <code>R_HOME/bin</code>. You can link or copy this script to a place where users can invoke it, for example to <code>/usr/local/bin/R</code>. You could also copy the man page <code>R.1</code> to a place where your <code>man</code> reader finds it, such as <code>/usr/local/man/man1</code>. If you want to install the complete R tree to, e.g., <code>/usr/local/lib/R</code>, see <a href="#installation">Installation</a>. Note: you do not <em>need</em> to install R: you can run it from where it was built.</p>
<p>You do not necessarily have to build R in the top-level source directory (say, <code>TOP_SRCDIR</code>). To build in <code>BUILDDIR</code>, run</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>cd BUILDDIR</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>TOP_SRCDIR<span class="sc">/</span>configure</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>make</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and so on, as described further below. This has the advantage of always keeping your source tree clean and is particularly recommended when you work with a version of R from Subversion. (You may need GNU <code>make</code> to allow this, and you will need no spaces in the path to the build directory. It is unlikely to work if the source directory has previously been used for a build.)</p>
<p>There are many settings which can be customized when building R and most are described in the file <code>config.site</code> in the top-level source directory. This can be edited, but for an installation using <code>BUILDDIR</code> it is better to put the changed settings in a newly-created file <code>config.site</code> in the build directory.</p>
<p>Now <code>rehash</code> if necessary, type <kbd>R</kbd>, and read the R manuals and the R FAQ (files <code>FAQ</code> or <code>doc/manual/R-FAQ.html</code>, or <a href="https://CRAN.R-project.org/doc/FAQ/R-FAQ.html" class="uri">https://CRAN.R-project.org/doc/FAQ/R-FAQ.html</a> which always has the version for the latest release of R).</p>
<p>Note: if you already have R installed, check that where you installed R replaces or comes earlier in your path than the previous installation. Some systems are set up to have <code>/usr/bin</code> (the standard place for a system installation) ahead of <code>/usr/local/bin</code> (the default place for installation of R) in their default path, and some do not have <code>/usr/local/bin</code> on the default path.</p>
</section>
<section id="help-options" class="level2 section" data-number="2.2">
<h2 class="section anchored" data-number="2.2" data-anchor-id="help-options"><span class="header-section-number">2.2</span> Help options</h2>
<p>R by default provides help pages as plain text displayed in a pager, with the options (see the help for <code>help</code>) of displaying help as HTML or PDF.</p>
<p>By default HTML help pages are created when needed rather than being built at install time.</p>
<p>If you need to disable the server and want HTML help, there is the option to build HTML pages when packages are installed (including those installed with R). This is enabled by the <code>configure</code> option <code>--enable-prebuilt-html</code>. Whether <code>R CMD INSTALL</code> (and hence <code>install.packages</code>) pre-builds HTML pages is determined by looking at the R installation and is reported by <code>R CMD INSTALL --help</code>: it can be overridden by specifying one of the <code>INSTALL</code> options <code>--html</code> or <code>--no-html</code>.</p>
<p>The server is disabled by setting the environment variable <code>R_DISABLE_HTTPD</code> to a non-empty value, either before R is started or within the R session before HTML help (including <code>help.start</code>) is used. It is also possible that system security measures will prevent the server from being started, for example if the loopback interface has been disabled. See <code>?tools::startDynamicHelp</code> for more details.</p>
</section>
<section id="making-the-manuals" class="level2 section page-columns page-full" data-number="2.3">
<h2 class="section anchored" data-number="2.3" data-anchor-id="making-the-manuals"><span class="header-section-number">2.3</span> Making the manuals</h2>
<p>There is a set of manuals that can be built from the sources,</p>
<dl>
<dt><code>fullrefman</code></dt>
<dd>
<p>Printed versions of all the help pages for base and recommended packages (around 3900 pages).</p>
</dd>
<dt><code>refman</code></dt>
<dd>
<p>Printed versions of the help pages for selected base packages (around 2300 pages)</p>
</dd>
<dt><code>R-FAQ</code></dt>
<dd>
<p>R FAQ</p>
</dd>
<dt><code>R-intro</code></dt>
<dd>
<p>“An Introduction to R”.</p>
</dd>
<dt><code>R-data</code></dt>
<dd>
<p>“R Data Import/Export”.</p>
</dd>
<dt><code>R-admin</code></dt>
<dd>
<p>“R Installation and Administration”, this manual.</p>
</dd>
<dt><code>R-exts</code></dt>
<dd>
<p>“Writing R Extensions”.</p>
</dd>
<dt><code>R-ints</code></dt>
<dd>
<p>“R Internals”.</p>
</dd>
<dt><code>R-lang</code></dt>
<dd>
<p>“The R Language Definition”.</p>
</dd>
</dl>
<p>To make these (with <code>fullrefman</code> rather than <code>refman</code>), use</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>make pdf      to create PDF versions</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>make info     to create info <span class="fu">files</span> (not ‘refman’ nor ‘fullrefman’).</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You will not be able to build any of these unless you have <code>texi2any</code> version 6.1 or later installed, and for PDF you must have <code>texi2dvi</code> and <code>texinfo.tex</code> installed (which are part of the GNU Texinfo distribution but are, especially <code>texinfo.tex</code>, often made part of the TeX package <strong>texinfo</strong> in re-distributions). The path to <code>texi2any</code> can be set by macro <code>TEXI2ANY</code> in <code>config.site</code>. NB: <code>texi2any</code> requires <code>perl</code>.</p>
<p>The PDF versions can be viewed using any recent PDF viewer: they have hyperlinks that can be followed. The info files are suitable for reading online with Emacs or the standalone GNU <code>info</code> program. The PDF versions will be created using the paper size selected at configuration (default ISO a4): this can be overridden by setting <code>R_PAPERSIZE</code> on the <code>make</code> command line, or setting <code>R_PAPERSIZE</code> in the environment and using <code>make -e</code>. (If re-making the manuals for a different paper size, you should first delete the file <code>doc/manual/version.texi</code>. The usual value for North America would be <code>letter</code>.)</p>
<p>There are some issues with making the PDF reference manual, <code>fullrefman.pdf</code> or <code>refman.pdf</code>. The help files contain both non-ASCII characters (e.g.&nbsp;in <code>text.Rd</code>) and upright quotes, neither of which are contained in the standard LaTeX Computer Modern fonts. We have provided the following alternatives:</p>
<dl class="page-columns page-full">
<dt><code>times</code></dt>
<dd class="page-columns page-full">
<p>(The default.) Using standard PostScript fonts, Times Roman, Helvetica and Courier. This works well both for on-screen viewing and for printing. One disadvantage is that the Usage and Examples sections may come out rather wide: this can be overcome by using <em>in addition</em> either of the options <code>inconsolata</code> (on a Unix-alike only if found by <code>configure</code>) or <code>beramono</code>, which replace the Courier monospaced font by Inconsolata or Bera Sans Mono respectively. (You will need the LaTeX package <strong>inconsolata</strong><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a> or <strong>bera</strong> installed.)</p>
<div class="no-row-height column-margin column-container"><div id="fn4"><p><sup>4</sup>&nbsp;Instructions on how to install the latest version are at <a href="https://www.ctan.org/tex-archive/fonts/inconsolata/" class="uri">https://www.ctan.org/tex-archive/fonts/inconsolata/</a>.</p></div></div><p>Note that in most LaTeX installations this will not actually use the standard fonts for PDF, but rather embed the URW clones NimbusRom, NimbusSans and (for Courier, if used) NimbusMon.</p>
<p>This needs LaTeX packages <strong>times</strong>, <strong>helvetic</strong> and (if used) <strong>courier</strong> installed.</p>
</dd>
<dt><code>lm</code></dt>
<dd>
<p>Using the <em>Latin Modern</em> fonts. These are not often installed as part of a TeX distribution, but can obtained from <a href="https://www.ctan.org/tex-archive/fonts/ps-type1/lm/" class="uri">https://www.ctan.org/tex-archive/fonts/ps-type1/lm/</a> and mirrors. This uses fonts rather similar to Computer Modern, but is not so good on-screen as <code>times</code>.</p>
</dd>
</dl>
<p>The default can be overridden by setting the environment variable <code>R_RD4PDF</code>. (On Unix-alikes, this will be picked up at install time and stored in <code>etc/Renviron</code>, but can still be overridden when the manuals are built, using <code>make -e</code>.) The usual<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a> default value for <code>R_RD4PDF</code> is <code>times,inconsolata,hyper</code>: omit <code>inconsolata</code> if you do not have LaTeX package <strong>inconsolata</strong> installed. <code>hyper</code> is always enabled (with a fallback if LaTeX package <strong>hyperref</strong> is not installed).</p>
<div class="no-row-height column-margin column-container"><div id="fn5"><p><sup>5</sup>&nbsp;on a Unix-alike, <code>inconsolata</code> is omitted if not found by <code>configure</code>.</p></div></div><p>Further options, e.g for <strong>hyperref</strong>, can be included in a file <code>Rd.cfg</code> somewhere on your LaTeX search path. For example, if you prefer to hyperlink the text and not the page number in the table of contents use</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>\ifthenelse{\boolean{Rd<span class="sc">@</span>use<span class="sc">@</span>hyper}}{\hypersetup{linktoc<span class="ot">=</span>section}}{}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>or</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>\ifthenelse{\boolean{Rd<span class="sc">@</span>use<span class="sc">@</span>hyper}}{\hypersetup{linktoc<span class="ot">=</span>all}}{}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>to hyperlink both text and page number.</p>
<p>Any generated PDF manuals can be compacted by</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>make compact<span class="sc">-</span>pdf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>provided <code>qpdf</code> and <code>gs</code> are available (see <code>?tools::compactPDF</code> for how to specify them if not on the path).</p>
<p>E-book versions of most of the manuals in one or both of <code>.epub</code> and <code>.mobi</code> formats can be made by running in <code>doc/manual</code> one of</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>make ebooks</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>make epub</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>make mobi</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This requires <code>ebook-convert</code> from <a href="https://calibre-ebook.com/download"><code>Calibre</code></a>, or from most Linux distributions. If necessary the path to <code>ebook-convert</code> can be set as make macro <code>EBOOK</code> by editing <code>doc/manual/Makefile</code> (which contains a commented value suitable for macOS) or using <code>make -e</code>.</p>
</section>
<section id="installation" class="level2 section page-columns page-full" data-number="2.4">
<h2 class="section anchored" data-number="2.4" data-anchor-id="installation"><span class="header-section-number">2.4</span> Installation</h2>
<p>To ensure that the installed tree is usable by the right group of users, set <code>umask</code> appropriately (perhaps to <code>022</code>) before unpacking the sources and throughout the build process.</p>
<p>After</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>.<span class="sc">/</span>configure</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>make</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>make check</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(or, when building outside the source, <code>TOP_SRCDIR/configure</code>, etc) have been completed successfully, you can install the complete R tree to your system by typing</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>make install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A parallel make can be used (but run <code>make</code> before <code>make install</code>). Those using GNU <code>make</code> 4.0 or later may want to use <code>make -j n -O</code> to avoid interleaving of output.</p>
<p>This will install to the following directories:</p>
<dl>
<dt><code>prefix/bin</code> or <code>bindir</code></dt>
<dd>
<p>the front-end shell script and other scripts and executables</p>
</dd>
<dt><code>prefix/man/man1</code> or <code>mandir/man1</code></dt>
<dd>
<p>the man page</p>
</dd>
<dt><code>prefix/LIBnn/R</code> or <code>libdir/R</code></dt>
<dd>
<p>all the rest (libraries, on-line help system, …). Here <code>LIBnn</code> is usually <code>lib</code>, but may be <code>lib64</code> on some 64-bit Linux systems. This is known as the R home directory.</p>
</dd>
</dl>
<p>where <code>prefix</code> is determined during configuration (typically <code>/usr/local</code>) and can be set by running <code>configure</code> with the option <code>--prefix</code>, as in</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>.<span class="sc">/</span>configure <span class="sc">--</span>prefix<span class="ot">=</span><span class="er">/</span>where<span class="sc">/</span>you<span class="sc">/</span>want<span class="sc">/</span>R<span class="sc">/</span>to<span class="sc">/</span>go</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>where the value should be an absolute path. This causes <code>make install</code> to install the R script to <code>/where/you/want/R/to/go/bin</code>, and so on. The prefix of the installation directories can be seen in the status message that is displayed at the end of <code>configure</code>. The installation may need to be done by the owner of <code>prefix</code>, often a root account.</p>
<p>There is the option of using <code>make install-strip</code> (see <a href="#debugging-symbols">Debugging Symbols</a>).</p>
<p>You can install into another directory tree by using</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>make prefix<span class="ot">=</span><span class="er">/</span>path<span class="sc">/</span>to<span class="sc">/</span>here install</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>at least with GNU <code>make</code> (but not some other Unix makes).</p>
<p>More precise control is available at configure time via options: see <code>configure --help</code> for details. (However, most of the ‘Fine tuning of the installation directories’ options are not used by R.)</p>
<p>Configure options <code>--bindir</code> and <code>--mandir</code> are supported and govern where a copy of the <code>R</code> script and the <code>man</code> page are installed.</p>
<p>The configure option <code>--libdir</code> controls where the main R files are installed: the default is <code>eprefix/LIBnn</code>, where <code>eprefix</code> is the prefix used for installing architecture-dependent files, defaults to <code>prefix</code>, and can be set via the configure option <code>--exec-prefix</code>.</p>
<p>Each of <code>bindir</code>, <code>mandir</code> and <code>libdir</code> can also be specified on the <code>make install</code> command line (at least for GNU <code>make</code>).</p>
<p>The <code>configure</code> or <code>make</code> variables <code>rdocdir</code> and <code>rsharedir</code> can be used to install the system-independent <code>doc</code> and <code>share</code> directories to somewhere other than <code>libdir</code>. The C header files can be installed to the value of <code>rincludedir</code>: note that as the headers are not installed into a subdirectory you probably want something like <code>rincludedir=/usr/local/include/R-4.5.0 Under development</code>.</p>
<p>If you want the R home to be something other than <code>libdir/R</code>, use <code>rhome</code>: for example</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>make install rhome<span class="ot">=</span><span class="er">/</span>usr<span class="sc">/</span>local<span class="sc">/</span>lib64<span class="sc">/</span>R<span class="dv">-4</span>.<span class="fl">5.0</span> Under development</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>will use a version-specific R home on a non-Debian Linux 64-bit system.</p>
<p>If you have made R as a shared/static library you can install it in your system’s library directory by</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>make prefix<span class="ot">=</span><span class="er">/</span>path<span class="sc">/</span>to<span class="sc">/</span>here install<span class="sc">-</span>libR</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>where <code>prefix</code> is optional, and <code>libdir</code> will give more precise control.<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> However, you should not install to a directory mentioned in <code>LDPATHS</code> (e.g.&nbsp;<code>/usr/local/lib64</code>) if you intend to work with multiple versions of R, since that directory may be given precedence over the <code>lib</code> directory of other R installations.</p>
<div class="no-row-height column-margin column-container"><div id="fn6"><p><sup>6</sup>&nbsp;This will be needed if more than one sub-architecture is to be installed.</p></div></div><div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>make install<span class="sc">-</span>strip</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>will install stripped executables, and on platforms where this is supported, stripped libraries in directories <code>lib</code> and <code>modules</code> and in the standard packages.</p>
<p>Note that installing R into a directory whose path contains spaces is not supported, and some aspects (such as installing source packages) will not work.</p>
<p>To install info and PDF versions of the manuals, use one or both of</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>make install<span class="sc">-</span>info</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>make install<span class="sc">-</span>pdf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Once again, it is optional to specify <code>prefix</code>, <code>libdir</code> or <code>rhome</code> (the PDF manuals are installed under the R home directory).</p>
<p>More precise control is possible. For info, the setting used is that of <code>infodir</code> (default <code>prefix/info</code>, set by configure option <code>--infodir</code>). The PDF files are installed into the R <code>doc</code> tree, set by the <code>make</code> variable <code>rdocdir</code>.</p>
<p>A staged installation is possible, that it is installing R into a temporary directory in order to move the installed tree to its final destination. In this case <code>prefix</code> (and so on) should reflect the final destination, and <code>DESTDIR</code> should be used: see <a href="https://www.gnu.org/prep/standards/html_node/DESTDIR.html" class="uri">https://www.gnu.org/prep/standards/html_node/DESTDIR.html</a>.</p>
<p>You can optionally install the run-time tests that are part of <code>make check-all</code> by</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>make install<span class="sc">-</span>tests</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>which populates a <code>tests</code> directory in the installation.</p>
</section>
<section id="uninstallation" class="level2 section" data-number="2.5">
<h2 class="section anchored" data-number="2.5" data-anchor-id="uninstallation"><span class="header-section-number">2.5</span> Uninstallation</h2>
<p>You can uninstall R by</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>make uninstall</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>optionally specifying <code>prefix</code> etc in the same way as specified for installation.</p>
<p>This will also uninstall any installed manuals. There are specific targets to uninstall info and PDF manuals in file <code>doc/manual/Makefile</code>.</p>
<p>Target <code>uninstall-tests</code> will uninstall any installed tests, as well as removing the directory <code>tests</code> containing the test results.</p>
<p>An installed shared/static <code>libR</code> can be uninstalled by</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>make prefix<span class="ot">=</span><span class="er">/</span>path<span class="sc">/</span>to<span class="sc">/</span>here uninstall<span class="sc">-</span>libR</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="sub-architectures" class="level2 section" data-number="2.6">
<h2 class="section anchored" data-number="2.6" data-anchor-id="sub-architectures"><span class="header-section-number">2.6</span> Sub-architectures</h2>
<p>Now 32-bit builds are unsupported, this section is only of historical interest, although in future the mechanisms could be used for different CPU types on the same OS (e.g.&nbsp;<code>x86_64</code> and <code>aarch64</code>).</p>
<p>Some platforms can support closely related builds of R which can share all but the executables and dynamic objects. Examples include builds under Linux for different CPUs or 32- and 64-bit builds.</p>
<p>R supports the idea of architecture-specific builds, specified by adding <code>r_arch=name</code> to the <code>configure</code> line. Here <code>name</code> can be anything non-empty, and is used to name subdirectories of <code>lib</code>, <code>etc</code>, <code>include</code> and the package <code>libs</code> subdirectories. Example names from other software are the use of <code>sparcv9</code> on Sparc Solaris and <code>32</code> by <code>gcc</code> on <code>x86_64</code> Linux.</p>
<p>If you have two or more such builds you can install them over each other (and for 32/64-bit builds on one architecture, one build can be done without <code>r_arch</code>). The space savings can be considerable: on <code>x86_64</code> Linux a basic install (without debugging symbols) took 74Mb, and adding a 32-bit build added 6Mb. If you have installed multiple builds you can select which build to run by</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>R <span class="sc">--</span>arch<span class="ot">=</span>name</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and just running <code>R</code> will run the last build that was installed.</p>
<p><code>R CMD INSTALL</code> will detect if more than one build is installed and try to install packages with the appropriate library objects for each. This will not be done if the package has an executable <code>configure</code> script or a <code>src/Makefile</code> file. In such cases you can install for extra builds by</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>R <span class="sc">--</span>arch<span class="ot">=</span>name CMD INSTALL <span class="sc">--</span>libs<span class="sc">-</span>only pkg1 pkg2 ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you want to mix sub-architectures compiled on different platforms (for example <code>x86_64</code> Linux and <code>i686</code> Linux), it is wise to use explicit names for each, and you may also need to set <code>libdir</code> to ensure that they install into the same place.</p>
<p>When sub-architectures are used the version of <code>Rscript</code> in e.g. <code>/usr/bin</code> will be the last installed, but architecture-specific versions will be available in e.g. <code>/usr/lib64/R/bin/exec${R_ARCH}</code>. Normally all installed architectures will run on the platform so the architecture of <code>Rscript</code> itself does not matter. The executable <code>Rscript</code> will run the <code>R</code> script, and at that time the setting of the <code>R_ARCH</code> environment variable determines the architecture which is run.</p>
<p>When running post-install tests with sub-architectures, use</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>R <span class="sc">--</span>arch<span class="ot">=</span>name CMD make check[<span class="sc">-</span>devel<span class="sc">|</span>all]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>to select a sub-architecture to check.</p>
<p>Sub-architectures were also used on Windows, but by selecting executables within the appropriate <code>bin</code> directory such as <code>R_HOME/bin/x64</code>. As from R 4.2.0 only the <code>x64</code> subdirectory is used.</p>
</section>
<section id="other-options" class="level2 section page-columns page-full" data-number="2.7">
<h2 class="section anchored" data-number="2.7" data-anchor-id="other-options"><span class="header-section-number">2.7</span> Other Options</h2>
<p>There are many other installation options, most of which are listed by <code>configure --help</code>. Almost all of those not listed elsewhere in this manual are either standard <code>autoconf</code> options not relevant to R or intended for specialist uses by the R developers.</p>
<p>One that may be useful when working on R itself is the option <code>--disable-byte-compiled-packages</code>, which ensures that the base and recommended packages are not byte-compiled. (Alternatively the (make or environment) variable <code>R_NO_BASE_COMPILE</code> can be set to a non-empty value for the duration of the build.)</p>
<p>Option <code>--with-internal-tzcode</code> makes use of R’s own code and copy of the IANA database for managing timezones. This will be preferred where there are issues with the system implementation, usually involving times after 2037 or before 1916. An alternative time-zone directory<a href="#fn7" class="footnote-ref" id="fnref7" role="doc-noteref"><sup>7</sup></a> can be used, pointed to by environment variable <code>TZDIR</code>: this should contain files such as <code>Europe/London</code>. On all tested OSes the system timezone was deduced correctly, but if necessary it can be set as the value of environment variable <code>TZ</code>.</p>
<div class="no-row-height column-margin column-container"><div id="fn7"><p><sup>7</sup>&nbsp;How to prepare such a directory is described in file <code>src/extra/tzone/Notes</code> in the R sources.</p></div><div id="fn8"><p><sup>8</sup>&nbsp;But on Windows problems have been seen with case-changing functions on accented Latin-1 characters.</p></div></div><p>Options <code>--with-internal-iswxxxxx</code>, <code>--with-internal-towlower</code> and <code>--with-internal-wcwidth</code> control the replacement of the system wide-character classification (such as <code>iswprint</code>), case-changing (<code>wctrans</code>) and width (<code>wcwidth</code> and <code>wcswidth</code>) functions by ones contained in the R sources. Replacement of the classification functions has been done for many years on macOS and AIX (and Windows): option <code>--with-internal-iswxxxxx</code> allows this to be suppressed on those platforms or used on others. Replacing the case-changing functions is the default on macOS and Windows. Replacement of the width functions has also been done for many years and remains the default. These options will only matter to those working with non-ASCII character data, especially in languages written in a non-Western script<a href="#fn8" class="footnote-ref" id="fnref8" role="doc-noteref"><sup>8</sup></a> (which includes ‘symbols’ such as emoji). Note that one of those <code>iswxxxxx</code> is <code>iswprint</code> which is used to decide whether to output a character as a glyph or as a <code>\U{xxxxxx}</code> escape—for example, try <code>"\U1f600"</code>, an emoji. The width functions are of most importance in East Asian locale: their values differ between such locales. (Replacing the system functions provides a degree of platform-independence (including to OS updates) but replaces it with a dependence on the R version.)</p>
<section id="debugging-symbols" class="level3 subsection" data-number="2.7.1">
<h3 class="subsection anchored" data-number="2.7.1" data-anchor-id="debugging-symbols"><span class="header-section-number">2.7.1</span> Debugging Symbols</h3>
<p>By default, <code>configure</code> adds a flag (usually <code>-g</code>) to the compilation flags for C, Fortran and C++ sources. This will slow down compilation and increase object sizes of both R and packages, so it may be a good idea to change those flags (set <code>CFLAGS</code> etc in <code>config.site</code> before configuring, or edit files <code>Makeconf</code> and <code>etc/Makeconf</code> between running <code>configure</code> and <code>make</code>).</p>
<p>Having debugging symbols available is useful both when running R under a debugger (e.g., <code>R -d gdb</code>) and when using sanitizers and <code>valgrind</code>, all things intended for experts.</p>
<p>Debugging symbols (and some others) can be ‘stripped’ on installation by using</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>make install<span class="sc">-</span>strip</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>How well this is supported depends on the platform: it works best on those using GNU <code>binutils</code>. On <code>x86_64</code> Linux a typical reduction in overall size was from 92MB to 66MB. On macOS debugging symbols are not by default included in <code>.dylib</code> and <code>.so</code> files, so there is negligible difference.</p>
</section>
<section id="openmp-support" class="level3 subsection page-columns page-full" data-number="2.7.2">
<h3 class="subsection anchored" data-number="2.7.2" data-anchor-id="openmp-support"><span class="header-section-number">2.7.2</span> OpenMP Support</h3>
<p>By default <code>configure</code> searches for suitable flags<a href="#fn9" class="footnote-ref" id="fnref9" role="doc-noteref"><sup>9</sup></a> for OpenMP support for the C, C++ (default standard) and Fortran compilers.</p>
<div class="no-row-height column-margin column-container"><div id="fn9"><p><sup>9</sup>&nbsp;for example, <code>-fopenmp</code>, <code>-fiopenmp</code>, <code>-xopenmp</code> or <code>-qopenmp</code>. This includes for <code>clang</code> and the Intel and Oracle compilers.</p></div></div><p>Only the C result is currently used for R itself, and only if <code>MAIN_LD</code>/<code>DYLIB_LD</code> were not specified. This can be overridden by specifying</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>R_OPENMP_CFLAGS</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Use for packages has similar restrictions (involving <code>SHLIB_LD</code> and similar: note that as Fortran code is by default linked by the C (or C++) compiler, both need to support OpenMP) and can be overridden by specifying some of</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode makefile code-with-copy"><code class="sourceCode makefile"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>SHLIB_OPENMP_CFLAGS</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>SHLIB_OPENMP_CXXFLAGS</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>SHLIB_OPENMP_FFLAGS</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Setting these to an empty value will disable OpenMP for that compiler (and configuring with <code>--disable-openmp</code> will disable all detection<a href="#fn10" class="footnote-ref" id="fnref10" role="doc-noteref"><sup>10</sup></a> of OpenMP). The <code>configure</code> detection test is to compile and link a standalone OpenMP program, which is not the same as compiling a shared object and loading it into the C program of R’s executable. Note that overridden values are not tested.</p>
<div class="no-row-height column-margin column-container"><div id="fn10"><p><sup>10</sup>&nbsp;This does not necessarily disable <em>use</em> of OpenMP – the <code>configure</code> code allows for platforms where OpenMP is used without a flag. For the <code>flang</code> compiler in late 2017, the Fortran runtime always used OpenMP.</p></div></div></section>
<section id="c-support" class="level3 subsection" data-number="2.7.3">
<h3 class="subsection anchored" data-number="2.7.3" data-anchor-id="c-support"><span class="header-section-number">2.7.3</span> C++ Support</h3>
<p>C++ is not used by R itself, but support is provided for installing packages with C++ code via <code>make</code> macros defined in file <code>etc/Makeconf</code> (and with explanations in file <code>config.site</code>):</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode makefile code-with-copy"><code class="sourceCode makefile"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>CXX</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>CXXFLAGS</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>CXXPICFLAGS</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>CXXSTD</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>CXX11</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>CXX11STD</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>CXX11FLAGS</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>CXX11PICFLAGS</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>CXX14</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>CXX14STD</span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>CXX14FLAGS</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>CXX14PICFLAGS</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>CXX17</span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>CXX17STD</span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>CXX17FLAGS</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>CXX17PICFLAGS</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>CXX20</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>CXX20STD</span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>CXX20FLAGS</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>CXX20PICFLAGS</span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>CXX23</span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>CXX23STD</span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>CXX23FLAGS</span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>CXX23PICFLAGS</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The macros <code>CXX</code> etc are those used by default for C++ code. <code>configure</code> will attempt to set the rest suitably, choosing for <code>CXXSTD</code> and <code>CXX11STD</code> a suitable flag such as <code>-std=gnu++17</code> for C++17 support (which is required if C++ is to be supported by default). Inferred values can be overridden in file <code>config.site</code> or on the <code>configure</code> command line: user-supplied values will be tested by compiling some C++11/14/17/20/23 code.</p>
<p>It may be that there is no suitable flag for C++14/17/20/23 support with the default compiler, in which case a different compiler could be selected for <code>CXX14</code>/<code>CXX17</code>/<code>CXX20</code>/<code>CXX23</code> with its corresponding flags.</p>
<p>If no suitable compiler/flag is found for the default C++ compiler, one can be set in file <code>config.site</code> <em>via</em> macros <code>CXX</code> and <code>CXXSTD</code>. A user-specified compiler does not need to pass the C++17 tests, so do this at your own risk as some packages may not compile.</p>
<p>The <code>-std</code> flag is supported by the GCC, <code>clang++</code> and Intel compilers. Currently accepted values are (plus some synonyms)</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>g<span class="sc">++</span><span class="er">:</span>     c<span class="sc">++</span><span class="dv">11</span> gnu<span class="sc">+</span><span class="dv">11</span> c<span class="sc">++</span><span class="dv">14</span> gnu<span class="sc">++</span><span class="dv">14</span> c<span class="sc">++</span><span class="dv">17</span> gnu<span class="sc">++</span><span class="dv">17</span> c<span class="sc">++</span><span class="dv">2</span>a gnu<span class="sc">++</span><span class="dv">2</span><span class="fu">a</span> (from <span class="dv">8</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>         c<span class="sc">++</span><span class="dv">20</span> gnu<span class="sc">++</span><span class="dv">20</span> (from <span class="dv">10</span>) c<span class="sc">++</span><span class="dv">23</span> gnu<span class="sc">++</span><span class="dv">23</span> c<span class="sc">++</span><span class="dv">2</span>b gnu<span class="sc">++</span><span class="dv">2</span><span class="fu">b</span> (from <span class="dv">11</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>Intel<span class="sc">:</span>   c<span class="sc">++</span><span class="dv">11</span>  gnu<span class="sc">+</span><span class="dv">11</span> c<span class="sc">++</span><span class="dv">14</span> gnu<span class="sc">++</span><span class="dv">14</span> c<span class="sc">++</span><span class="dv">17</span> gnu<span class="sc">++</span><span class="dv">17</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>         c<span class="sc">++</span><span class="dv">20</span> gnu<span class="sc">++</span><span class="dv">20</span> (from <span class="fl">2021.1</span>) c<span class="sc">++</span><span class="dv">2</span>b gnu<span class="sc">++</span><span class="dv">2</span><span class="fu">b</span> (from <span class="fl">2022.2</span>)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>         c<span class="sc">++</span><span class="dv">23</span> gnu<span class="sc">++</span><span class="dv">23</span> (at least from <span class="fl">2024.0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(Those for LLVM <code>clang++</code> are documented at <a href="https://clang.llvm.org/cxx_status.html" class="uri">https://clang.llvm.org/cxx_status.html</a>, and follow <code>g++</code>: <code>-std=c++20</code> is supported from Clang 10, <code>-std=c++2b</code> from Clang 13 and <code>-std=c++23</code> from Clang 17. Apple Clang supports <code>-std=c++2b</code> from 13.1.6 and <code>-std=c++23</code> from 16.0.0.)</p>
<p>‘Standards’ for <code>g++</code> starting with <code>gnu</code> enable ‘GNU extensions’: what those are is hard to track down.</p>
<p>For the use of C++ in R packages, see <a href="https://cran.r-project.org/doc/manuals/R-exts.html#Top" data-manual="R-exts">Writing R Extensions</a>. Prior to R 3.6.0 the default C++ standard was that of the compiler used: currently it is C++17.</p>
<p><a href="https://en.cppreference.com/w/cpp/compiler_support" class="uri">https://en.cppreference.com/w/cpp/compiler_support</a> indicates which versions of common compilers support (parts of) which C++ standards. GCC introduced C++17 support gradually, but version 7 should suffice.</p>
</section>
<section id="c-standards" class="level3 subsection page-columns page-full" data-number="2.7.4">
<h3 class="subsection anchored" data-number="2.7.4" data-anchor-id="c-standards"><span class="header-section-number">2.7.4</span> C standards</h3>
<p>Compiling R requires some POSIX features (such as <code>strdup</code><a href="#fn11" class="footnote-ref" id="fnref11" role="doc-noteref"><sup>11</sup></a> and the <code>ssize_t</code> type) not in the C standards. Typically compilers make these available, but <strong>not</strong> if strict C compliance is specified by for example <code>-std=c17</code>. So if you want to specify a non-default standard use something like <code>-std=gnu23</code>.</p>
<div class="no-row-height column-margin column-container"><div id="fn11"><p><sup>11</sup>&nbsp;this is part of C23, but part of the C library not the compiler.</p></div></div><p>Compiling R requires C99 or later: C11 and C17 are minor updates, but the substantial update ‘C23’ (finally published in October 2024) is also supported for current versions of GCC and <code>clang</code>.</p>
<p>As from R 4.3.0 there is support for packages to indicate their preferred C version. Macros <code>CC17</code>, <code>C17FLAGS</code>, <code>CC23</code> and <code>C23FLAGS</code> can be set in <code>config.site</code> (there are examples there). Those for C17 should support C17 or earlier and not allow C23 additions so for example <code>bool</code>, <code>true</code> and <code>false</code> can be used as identifiers. Those for C23 should support the new types such as <code>bool</code>.</p>
<p>Some compilers warn enthusiastically about prototypes. For most, omitting <code>-Wstrict-prototypes</code> in <code>C17FLAGS</code> suffices. However, versions 15 and later of LLVM <code>clang</code> and 14.0.3 and later of Apple clang warn by default in all modes if <code>-Wall</code> or <code>-pedantic</code> is used, and may need <code>-Wno-strict-prototypes</code>.</p>
</section>
<section id="link-time-optimization" class="level3 subsection page-columns page-full" data-number="2.7.5">
<h3 class="subsection anchored" data-number="2.7.5" data-anchor-id="link-time-optimization"><span class="header-section-number">2.7.5</span> Link-Time Optimization</h3>
<p>There is support for using link-time optimization (LTO) if the toolchain supports it: configure with flag <code>--enable-lto</code>. When LTO is enabled it is used for compiled code in add-on packages unless the flag <code>--enable-lto=R</code> is used<a href="#fn12" class="footnote-ref" id="fnref12" role="doc-noteref"><sup>12</sup></a>.</p>
<div class="no-row-height column-margin column-container"><div id="fn12"><p><sup>12</sup>&nbsp;Then recommended packages installed as part of the R installation do use LTO, but not packages installed later.</p></div><div id="fn13"><p><sup>13</sup>&nbsp;A complete CRAN installation reduced from 50 to 35GB.</p></div></div><p>The main benefit seen to date from LTO has been detecting long-standing bugs in the ways packages pass arguments to compiled code and between compilation units. Benchmarking in 2020 with <code>gcc</code>/<code>gfortran</code>&nbsp;10 showed gains of a few percent in increased performance and reduction in installed size for builds without debug symbols, but large size reductions for some packages<a href="#fn13" class="footnote-ref" id="fnref13" role="doc-noteref"><sup>13</sup></a> with debug symbols. (Performance and size gains are said to be most often seen in complex C++ builds.)</p>
<p>Whether toolchains support LTO is often unclear: all of the C compiler, the Fortran compiler<a href="#fn14" class="footnote-ref" id="fnref14" role="doc-noteref"><sup>14</sup></a> and linker have to support it, and support it by the same mechanism (so mixing compiler families may not work and a non-default linker may be needed). It has been supported by the GCC and LLVM projects for some years with diverging implementations.</p>
<div class="no-row-height column-margin column-container"><div id="fn14"><p><sup>14</sup>&nbsp;although there is the possibility to exclude Fortran but that misses some of the benefits.</p></div></div><p>LTO support was added in 2011 for GCC&nbsp;4.5 on Linux but was little used before 2019: compiler support has steadily improved over those years and <code>--enable-lto=R</code> is nowadays used for some routine CRAN checking.</p>
<p>Unfortunately <code>--enable-lto</code> may be accepted but silently do nothing useful if some of the toolchain does not support LTO: this is less common than it once was.</p>
<p>Various macros can be set in file <code>config.site</code> to customize how LTO is used. If the Fortran compiler is not of the same family as the C/C++ compilers, set macro <code>LTO_FC</code> (probably to empty). Macro <code>LTO_LD</code> can be used to select an alternative linker should that be needed.</p>
</section>
<section id="lto-with-gcc" class="level3 subsubsection page-columns page-full" data-number="2.7.6">
<h3 class="subsubsection anchored" data-number="2.7.6" data-anchor-id="lto-with-gcc"><span class="header-section-number">2.7.6</span> LTO with GCC</h3>
<p>This has been tested on Linux with <code>gcc</code>/<code>gfortran</code>&nbsp;8 and later: that needed setting (e.g.&nbsp;in <code>config.site</code>)</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>AR<span class="ot">=</span>gcc<span class="sc">-</span>ar</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>RANLIB<span class="ot">=</span>gcc<span class="sc">-</span>ranlib</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For non-system compilers or if those wrappers have not been installed one may need something like</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>AR<span class="ot">=</span><span class="st">"ar --plugin=/path/to/liblto_plugin.so"</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>RANLIB<span class="ot">=</span><span class="st">"ranlib --plugin=/path/to/liblto_plugin.so"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and <code>NM</code> may be needed to be set analogously. (If using an LTO-enabled build to check packages, set environment variable <code>UserNM</code><a href="#fn15" class="footnote-ref" id="fnref15" role="doc-noteref"><sup>15</sup></a> to <code>gcc-nm</code>.)</p>
<div class="no-row-height column-margin column-container"><div id="fn15"><p><sup>15</sup>&nbsp;not <code>NM</code> as we found <code>make</code> overriding that.</p></div></div><p>With GCC 5 and later it is possible to parallelize parts of the LTO linking process: set the make macro <code>LTO</code> to something like <code>LTO=-flto=8</code> (to use 8 threads), for example in file <code>config.site</code>.</p>
<p>Under some circumstances and for a few packages, the PIC flags have needed overriding on Linux with GCC 9: e.g use in <code>config.site</code>:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode makefile code-with-copy"><code class="sourceCode makefile"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="dt">CPICFLAGS</span><span class="ch">=</span><span class="st">-fPIC</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="dt">CXXPICFLAGS</span><span class="ch">=</span><span class="st">-fPIC</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX11PICFLAGS</span><span class="ch">=</span><span class="st">-fPIC</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX14PICFLAGS</span><span class="ch">=</span><span class="st">-fPIC</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX17PICFLAGS</span><span class="ch">=</span><span class="st">-fPIC</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX20PICFLAGS</span><span class="ch">=</span><span class="st">-fPIC</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="dt">FPICFLAGS</span><span class="ch">=</span><span class="st">-fPIC</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We suggest only using these if the problem is encountered (it had not been seen on CRAN with GCC 10–14 at the time of writing).</p>
<p>Note that R may need to be re-compiled after even a minor update to the compiler (e.g.&nbsp;from 13.1 to 13.2).</p>
</section>
<section id="lto-with-llvm" class="level3 subsubsection" data-number="2.7.7">
<h3 class="subsubsection anchored" data-number="2.7.7" data-anchor-id="lto-with-llvm"><span class="header-section-number">2.7.7</span> LTO with LLVM</h3>
<p>LLVM supports another type of LTO called ‘Thin LTO’ as well as a similar implementation to GCC, sometimes called ‘Full LTO’. (See <a href="https://clang.llvm.org/docs/ThinLTO.html" class="uri">https://clang.llvm.org/docs/ThinLTO.html</a>.) Currently the LLVM compilers relevant to R are <code>clang</code> and <code>flang-new</code> for which this can be selected by setting macro <code>LTO=-flto=thin</code>. LLVM has</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>AR<span class="ot">=</span>llvm<span class="sc">-</span>ar</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>RANLIB<span class="ot">=</span>llvm<span class="sc">-</span>ranlib</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(but macOS does not, and these are not needed there). Where the linker supports a parallel backend for Thin LTO this can be specified <em>via</em> the macro <code>LTO_LD</code>: see the URL above for per-linker settings and further linking optimizations.)</p>
<p>For example, on macOS one might use</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>LTO<span class="ot">=</span><span class="sc">-</span>flto<span class="ot">=</span>thin</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>LTO_FC<span class="ot">=</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>LTO_LD<span class="ot">=</span><span class="sc">-</span>Wl,<span class="sc">-</span>mllvm,<span class="sc">-</span>threads<span class="ot">=</span><span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>to use Thin LTO with 4 threads for C/C++ code, but skip LTO for Fortran code compiled with <code>gfortran</code>.</p>
<p>It is said to be particularly beneficial to use <code>-O3</code> for <code>clang</code> in conjunction with LTO.</p>
<p>It seems that <code>flang-new</code> may in future support LTO.</p>
<p>The 2020s versions of Intel’s C/C++ compilers are based on LLVM and as such support LLVM-style LTO, both ‘full’ and ‘thin’. This might use something like</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>LTO<span class="ot">=</span><span class="sc">-</span>flto<span class="ot">=</span>thin <span class="sc">-</span>flto<span class="sc">-</span>jobs<span class="ot">=</span><span class="dv">8</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="lto-for-package-checking" class="level3 subsubsection page-columns page-full" data-number="2.7.8">
<h3 class="subsubsection anchored" data-number="2.7.8" data-anchor-id="lto-for-package-checking"><span class="header-section-number">2.7.8</span> LTO for package checking</h3>
<p>LTO effectively compiles all the source code in a package as a single compilation unit and so allows the compiler (with sufficient diagnostic flags such as <code>-Wall</code>) to check consistency between what are normally separate compilation units.</p>
<p>With <code>gcc</code>/<code>gfortran</code> 9.x and later<a href="#fn16" class="footnote-ref" id="fnref16" role="doc-noteref"><sup>16</sup></a> LTO will flag inconsistencies in calls to Fortran subroutines/functions, both between Fortran source files and between Fortran and C/C++. <code>gfortran</code> 8.4, 9.2 and later can help understanding these by extracting C prototypes from Fortran source files with option <code>-fc-prototypes-external</code>, e.g.&nbsp;that (at the time of writing) Fortran <code>LOGICAL</code> corresponds to <code>int_least32_t *</code> in C.</p>
<div class="no-row-height column-margin column-container"><div id="fn16"><p><sup>16</sup>&nbsp;probably also 8.4 and later.</p></div></div></section>
</section>
<section id="testing-an-installation" class="level2 section" data-number="2.8">
<h2 class="section anchored" data-number="2.8" data-anchor-id="testing-an-installation"><span class="header-section-number">2.8</span> Testing an Installation</h2>
<p>Full post-installation testing is possible only if the test files have been installed with</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>make install<span class="sc">-</span>tests</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>which populates a <code>tests</code> directory in the installation.</p>
<p>If this has been done, two testing routes are available. The first is to move to the home directory of the R installation (as given by <code>R RHOME</code> or from R as <code>R.home()</code>) and run</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> tests</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="co">## followed by one of</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a><span class="ex">../bin/R</span> CMD make check</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="ex">../bin/R</span> CMD make check-devel</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="ex">../bin/R</span> CMD make check-all</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and other useful targets are <code>test-BasePackages</code> and <code>test-Recommended</code> to run tests of the standard and recommended packages (if installed) respectively.</p>
<p>This re-runs all the tests relevant to the installed R (including for example the code in the package vignettes), but not for example the ones checking the example code in the manuals nor making the standalone Rmath library. This can occasionally be useful when the operating environment has been changed, for example by OS updates or by substituting the BLAS (see <a href="Essential-and-useful-other-programs-under-a-Unix-alike.html#shared-blas">Shared BLAS</a>).</p>
<p>Parallel checking of packages may be possible: set the environment variable <code>TEST_MC_CORES</code> to the maximum number of processes to be run in parallel. This affects both checking the package examples (part of <code>make check</code>) and package sources (part of <code>make check-devel</code> and <code>make check-recommended</code>). It does require a <code>make</code> command which supports the <code>make -j n</code> option: most do.</p>
<p>Alternatively, the installed R can be run, preferably with <code>--vanilla</code>. Then</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode default code-with-copy"><code class="sourceCode default"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>pdf("tests.pdf") ## optional, but prevents flashing graphics windows</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>Sys.setenv(LC_COLLATE = "C", LC_TIME = "C", LANGUAGE = "en")</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>tools::testInstalledBasic("both")</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>tools::testInstalledPackages(scope = "base")</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>tools::testInstalledPackages(scope = "recommended")</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>runs the basic tests and then all the tests on the standard and recommended packages. These tests can be run from anywhere: the basic tests write their results in the <code>tests</code> folder of the R home directory and run fewer tests than the first approach: in particular they do not test things which need Internet access—that can be tested by</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>tools<span class="op">::</span>testInstalledBasic<span class="op">(</span><span class="st">"internet"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>It is possible to test the installed packages (but not their package-specific tests) by <code>testInstalledPackages</code> even if <code>make install-tests</code> was not run. The outputs are written under the current directory unless a different one is specified by <code>outDir</code>.</p>
<p>Note that the results may depend on the language set for times and messages: for maximal similarity to reference results you may want to try setting (before starting the R session)</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>LANGUAGE<span class="ot">=</span>en</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and use a UTF-8 or Latin-1 locale.</p>
<p>Footnotes</p>


</section>


</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Obtaining-R.html" class="pagination-link" aria-label="Obtaining R">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Obtaining R</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Installing-R-under-Windows.html" class="pagination-link" aria-label="Installing R under Windows">
        <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Installing R under Windows</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>A re-styled version of the original R manuals at <a href="https://cran.r-project.org/manuals.html" class="uri">https://cran.r-project.org/manuals.html</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Built using <a href="https://quarto.org">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>