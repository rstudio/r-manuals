<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head>
  <meta charset="utf-8">
  <meta name="generator" content="quarto-0.2.443">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>R Manuals :: R Installation and Administration - 11&nbsp; Configuration on a Unix-alike</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>

  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <script src="site_libs/quarto-nav/quarto-nav.js"></script>
  <script src="site_libs/quarto-nav/headroom.min.js"></script>
  <script src="site_libs/clipboard/clipboard.min.js"></script>
  <meta name="quarto:offset" content="./">
  <script src="site_libs/quarto-search/autocomplete.umd.js"></script>
  <script src="site_libs/quarto-search/fuse.min.js"></script>
  <script src="site_libs/quarto-search/quarto-search.js"></script>
  <link href="./Platform-notes.html" rel="next">
  <link href="./Essential-and-useful-other-programs-under-a-Unix-alike.html" rel="prev">
  <script src="site_libs/quarto-html/quarto.js"></script>
  <script src="site_libs/quarto-html/popper.min.js"></script>
  <script src="site_libs/quarto-html/tippy.umd.min.js"></script>
  <script src="site_libs/quarto-html/anchor.min.js"></script>
  <link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
  <link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
  <script src="site_libs/bootstrap/bootstrap.min.js"></script>
  <link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
  <link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
  <script id="quarto-search-options" type="application/json">{
    "location": "navbar",
    "copy-button": false,
    "collapse-after": 2,
    "panel-placement": "end",
    "type": "overlay",
    "limit": 20,
    "language": {
      "search-no-results-text": "No results",
      "search-matching-documents-text": "matching documents",
      "search-copy-link-title": "Copy link to search",
      "search-hide-matches-text": "Hide additional matches",
      "search-more-match-text": "more match in this document",
      "search-more-matches-text": "more matches in this document",
      "search-clear-button-title": "Clear",
      "search-detached-cancel-button-title": "Cancel",
      "search-submit-button-title": "Submit"
    }
  }</script>
</head>
<body class="floating slimcontent">
<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">R Manuals :: R Installation and Administration</span>
  </a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./../index.html">Home</a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-manuals" role="button" data-bs-toggle="dropdown" aria-expanded="false">Manuals</a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-manuals">    
        <li>
    <a class="dropdown-item" href="./../r-intro/index.html">An Introduction to R</a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-data/index.html">R Data Import/Export</a>
  </li>  
        <li>
    <a class="dropdown-item" href="./index.html">R Installation and Administration</a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-exts/index.html">Writing R Extensions</a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-lang/index.html">R Language Definition</a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-ints/index.html">R Internals</a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./../about.html">About</a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Configuration on a Unix-alike</span></h1>
      <button type="button" class="quarto-btn-toggle btn">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
  <div class="sidebar-menu-container"> 
  <ul class="list-unstyled mt-1">
      <li class="sidebar-item">
  <a href="./index.html" class="">R Installation and Administration</a>
</li>
      <li class="sidebar-item">
  <a href="./Obtaining-R.html" class=""><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Obtaining R</span></a>
</li>
      <li class="sidebar-item">
  <a href="./Installing-R-under-Unix-alikes.html" class=""><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Installing R under Unix-alikes</span></a>
</li>
      <li class="sidebar-item">
  <a href="./Installing-R-under-Windows.html" class=""><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Installing R under Windows</span></a>
</li>
      <li class="sidebar-item">
  <a href="./Installing-R-under-macOS.html" class=""><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Installing R under macOS</span></a>
</li>
      <li class="sidebar-item">
  <a href="./Running-R.html" class=""><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Running R</span></a>
</li>
      <li class="sidebar-item">
  <a href="./Add-on-packages.html" class=""><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Add-on packages</span></a>
</li>
      <li class="sidebar-item">
  <a href="./Internationalization.html" class=""><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Internationalization and Localization</span></a>
</li>
      <li class="sidebar-item">
  <a href="./Choosing-between-32--and-64-bit-builds.html" class=""><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Choosing between 32- and 64-bit builds</span></a>
</li>
      <li class="sidebar-item">
  <a href="./The-standalone-Rmath-library.html" class=""><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">The standalone Rmath library</span></a>
</li>
      <li class="sidebar-item">
  <a href="./Essential-and-useful-other-programs-under-a-Unix-alike.html" class=""><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Essential and useful other programs under a Unix-alike</span></a>
</li>
      <li class="sidebar-item">
  <a href="./Configuration-on-a-Unix-alike.html" class="active"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Configuration on a Unix-alike</span></a>
</li>
      <li class="sidebar-item">
  <a href="./Platform-notes.html" class=""><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Platform notes</span></a>
</li>
      <li class="sidebar-item">
  <a href="./Function-and-variable-index.html" class="">Function and variable index</a>
</li>
      <li class="sidebar-item">
  <a href="./Concept-index.html" class="">Concept index</a>
</li>
      <li class="sidebar-item">
  <a href="./Environment-variable-index.html" class="">Environment variable index</a>
</li>
  </ul>
  </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
      <nav id="TOC" role="doc-toc">
<h2 id="toc-title">Table of contents</h2>
<ul>
<li><a href="#configuration-options" class="nav-link active" data-scroll-target="#configuration-options"> <span class="header-section-number">11.1</span> Configuration options</a></li>
<li><a href="#internationalization-support" class="nav-link" data-scroll-target="#internationalization-support"> <span class="header-section-number">11.2</span> Internationalization support</a></li>
<li><a href="#configuration-variables" class="nav-link" data-scroll-target="#configuration-variables"> <span class="header-section-number">11.3</span> Configuration variables</a>
<ul class="collapse">
<li><a href="#setting-paper-size" class="nav-link" data-scroll-target="#setting-paper-size"> <span class="header-section-number">11.3.1</span> Setting paper size</a></li>
<li><a href="#setting-the-browsers" class="nav-link" data-scroll-target="#setting-the-browsers"> <span class="header-section-number">11.3.2</span> Setting the browsers</a></li>
<li><a href="#compilation-flags" class="nav-link" data-scroll-target="#compilation-flags"> <span class="header-section-number">11.3.3</span> Compilation flags</a></li>
<li><a href="#making-manuals" class="nav-link" data-scroll-target="#making-manuals"> <span class="header-section-number">11.3.4</span> Making manuals</a></li>
</ul></li>
<li><a href="#setting-the-shell" class="nav-link" data-scroll-target="#setting-the-shell"> <span class="header-section-number">11.4</span> Setting the shell</a></li>
<li><a href="#using-make" class="nav-link" data-scroll-target="#using-make"> <span class="header-section-number">11.5</span> Using make</a></li>
<li><a href="#using-fortran" class="nav-link" data-scroll-target="#using-fortran"> <span class="header-section-number">11.6</span> Using Fortran</a></li>
<li><a href="#compile-and-load-flags" class="nav-link" data-scroll-target="#compile-and-load-flags"> <span class="header-section-number">11.7</span> Compile and load flags</a></li>
<li><a href="#maintainer-mode" class="nav-link" data-scroll-target="#maintainer-mode"> <span class="header-section-number">11.8</span> Maintainer mode</a></li>
</ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full">
<header id="title-block-header">
<h1 class="title display-7"><span id="configuration-on-a-unix-alike" class="quarto-section-identifier d-none d-lg-block"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Configuration on a Unix-alike</span></span></h1>
</header>

<section id="configuration-options" class="level2 section page-columns page-full" data-number="11.1">
<h2 class="section anchored" data-number="11.1" data-anchor-id="configuration-options"><span class="header-section-number">11.1</span> Configuration options</h2>
<p><code>configure</code> has many options: running</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>.<span class="sc">/</span>configure <span class="sc">--</span>help</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>will give a list. Probably the most important ones not covered elsewhere are (defaults in brackets)</p>
<dl>
<dt><code>--with-x</code></dt>
<dd><p>use the X Window System [yes]</p>
</dd>
<dt><code>--x-includes=DIR</code></dt>
<dd><p>X include files are in <var>DIR</var></p>
</dd>
<dt><code>--x-libraries=DIR</code></dt>
<dd><p>X library files are in <var>DIR</var></p>
</dd>
<dt><code>--with-readline</code></dt>
<dd><p>use readline library (if available) [yes]</p>
</dd>
<dt><code>--enable-R-profiling</code></dt>
<dd><p>attempt to compile support for <code>Rprof()</code> [yes]</p>
</dd>
<dt><code>--enable-memory-profiling</code></dt>
<dd><p>attempt to compile support for <code>Rprofmem()</code> and <code>tracemem()</code> [no]</p>
</dd>
<dt><code>--enable-R-shlib</code></dt>
<dd><p>build R as a shared/dynamic library [no]</p>
</dd>
<dt><code>--enable-BLAS-shlib</code></dt>
<dd><p>build the BLAS as a shared/dynamic library [yes, except on AIX]</p>
</dd>
</dl>
<p>You can use <code>--without-foo</code> or <code>--disable-foo</code> for the negatives.</p>
<p>You will want to use <code>--disable-R-profiling</code> if you are building a profiled executable of R (e.g.&nbsp;with <code>-pg)</code>. Support for R profiling requires OS support for POSIX threads (<em>aka</em> <code>pthreads</code>), which are available on all mainstream Unix-alike platforms.</p>
<div class="page-columns page-full"><p>Flag <code>--enable-R-shlib</code> causes the make process to build R as a dynamic (shared) library, typically called <code>libR.so</code>, and link the main R executable <code>R.bin</code> against that library. This can only be done if all the code (including system libraries) can be compiled into a dynamic library, and there may be a performance<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> penalty. So you probably only want this if you will be using an application which embeds R. Note that C code in packages installed on an R system linked with <code>--enable-R-shlib</code> is linked against the dynamic library and so such packages cannot be used from an R system built in the default way. Also, because packages are linked against R they are on some OSes also linked against the dynamic libraries R itself is linked against, and this can lead to symbol conflicts.</p><div class="no-row-height column-margin column-container"><li id="fn1" role="doc-endnote"><p><sup>1</sup>&nbsp;We have measured 15–20% on <code>i686</code> Linux and around 10% on <code>x86_64</code> Linux.</p></li></div></div>
<div class="page-columns page-full"><p>For maximally effective use of <code>valgrind</code>, R should be compiled with valgrind instrumentation. The <code>configure</code> option is <code>--with-valgrind-instrumentation=level</code>, where <var>level</var> is 0, 1 or 2. (Level 0 is the default and does not add anything.) The system headers for <code>valgrind</code> can be requested by option <code>--with-system-valgrind-headers</code>: they will be used if present (on Linux they may be in a separate package such as <strong>valgrind-devel</strong>). Note though that there is no guarantee that the code in R will be compatible with very old<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> or future <code>valgrind</code> headers.</p><div class="no-row-height column-margin column-container"><li id="fn2" role="doc-endnote"><p><sup>2</sup>&nbsp;We believe that versions 3.4.0 to 3.15.0 are compatible.</p></li></div></div>
<p>If you need to re-configure R with different options you may need to run <code>make clean</code> or even <code>make distclean</code> before doing so.</p>
<p>The <code>configure</code> script has other generic options added by <code>autoconf</code> and which are not supported for R: in particular building for one architecture on a different host is not possible.</p>
</section>
<section id="internationalization-support" class="level2 section" data-number="11.2">
<h2 class="section anchored" data-number="11.2" data-anchor-id="internationalization-support"><span class="header-section-number">11.2</span> Internationalization support</h2>
<p>Translation of messages is supported via GNU <code>gettext</code> unless disabled by the configure option <code>--disable-nls</code>. The <code>configure</code> report will show <code>NLS</code> as one of the ‘Additional capabilities’ if support has been compiled in, and running in an English locale (but not the <code>C</code> locale) will include</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>  Natural language support but running <span class="cf">in</span> an English locale</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>in the greeting on starting R.</p>
</section>
<section id="configuration-variables" class="level2 section" data-number="11.3">
<h2 class="section anchored" data-number="11.3" data-anchor-id="configuration-variables"><span class="header-section-number">11.3</span> Configuration variables</h2>
<p>If you need or want to set certain configure variables to something other than their default, you can do that by either editing the file <code>config.site</code> (which documents many of the variables you might want to set: others can be seen in file <code>etc/Renviron.in</code>) or on the command line as</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>.<span class="sc">/</span>configure VAR<span class="ot">=</span>value</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you are building in a directory different from the sources, there can be copies of <code>config.site</code> in the source and the build directories, and both will be read (in that order). In addition, if there is a file <code>~/.R/config</code>, it is read between the <code>config.site</code> files in the source and the build directories.</p>
<p>There is also a general <code>autoconf</code> mechanism for <code>config.site</code> files, which are read before any of those mentioned in the previous paragraph. This looks first at a file specified by the environment variable <code>CONFIG_SITE</code>, and if not is set at files such as <code>/usr/local/share/config.site</code> and <code>/usr/local/etc/config.site</code> in the area (exemplified by <code>/usr/local</code>) where R would be installed.</p>
<p>These variables are <em>precious</em>, implying that they do not have to be exported to the environment, are kept in the cache even if not specified on the command line, checked for consistency between two configure runs (provided that caching is used), and are kept during automatic reconfiguration as if having been passed as command line arguments, even if no cache is used.</p>
<p>See the variable output section of <code>configure --help</code> for a list of all these variables.</p>
<p>If you find you need to alter configure variables, it is worth noting that some settings may be cached in the file <code>config.cache</code>, and it is a good idea to remove that file (if it exists) before re-configuring. Note that caching is turned <em>off</em> by default: use the command line option <code>--config-cache</code> (or <code>-C</code>) to enable caching.</p>
<section id="setting-paper-size" class="level3 subsection" data-number="11.3.1">
<h3 class="subsection anchored" data-number="11.3.1" data-anchor-id="setting-paper-size"><span class="header-section-number">11.3.1</span> Setting paper size</h3>
<p>One common variable to change is <code>R_PAPERSIZE</code>, which defaults to <code>a4</code>, not <code>letter</code>. (Valid values are <code>a4</code>, <code>letter</code>, <code>legal</code> and <code>executive</code>.)</p>
<p>This is used both when configuring R to set the default, and when running R to override the default. It is also used to set the paper size when making PDF manuals.</p>
<p>The configure default will most often be <code>a4</code> if <code>R_PAPERSIZE</code> is unset. (If the (Debian Linux) program <code>paperconf</code> is found or the environment variable <code>PAPERSIZE</code> is set, these are used to produce the default.)</p>
</section>
<section id="setting-the-browsers" class="level3 subsection" data-number="11.3.2">
<h3 class="subsection anchored" data-number="11.3.2" data-anchor-id="setting-the-browsers"><span class="header-section-number">11.3.2</span> Setting the browsers</h3>
<p>Another precious variable is <code>R_BROWSER</code>, the default HTML browser, which should take a value of an executable in the user’s path or specify a full path.</p>
<p>Its counterpart for PDF files is <code>R_PDFVIEWER</code>.</p>
</section>
<section id="compilation-flags" class="level3 subsection" data-number="11.3.3">
<h3 class="subsection anchored" data-number="11.3.3" data-anchor-id="compilation-flags"><span class="header-section-number">11.3.3</span> Compilation flags</h3>
<p>If you have libraries and header files, e.g., for GNU readline, in non-system directories, use the variables <code>LDFLAGS</code> (for libraries, using <code>-L</code> flags to be passed to the linker) and <code>CPPFLAGS</code> (for header files, using <code>-I</code> flags to be passed to the C/C++ preprocessors), respectively, to specify these locations. These default to <code>-L/usr/local/lib</code> (<code>LDFLAGS</code>, <code>-L/usr/local/lib64</code> on most 64-bit Linux OSes) and <code>-I/usr/local/include</code> (<code>CPPFLAGS</code>, but note that on most systems <code>/usr/local/include</code> is regarded as a system include directory and so instances in that macro will be skipped) to catch the most common cases. If libraries are still not found, then maybe your compiler/linker does not support re-ordering of <code>-L</code> and <code>-l</code> flags. In this case, use a different compiler (or a front-end shell script which does the re-ordering).</p>
<p>These flags can also be used to build a faster-running version of R. On most platforms using <code>gcc</code>, having <code>-O3</code> in <code>CFLAGS</code> and <code>FFLAGS</code> produces worthwhile performance gains with <code>gcc</code> and <code>gfortran</code>, but may result in a less reliable build (both segfaults and incorrect numeric computations have been seen). On systems using the GNU linker (especially those using R as a shared library), it is likely that including <code>-Wl,-O1</code> in <code>LDFLAGS</code> is worthwhile, and <code>'-Bdirect,--hash-style=both,-Wl,-O1</code>’ is recommended at <a href="https://lwn.net/Articles/192624/" class="uri">https://lwn.net/Articles/192624/</a>. Tuning compilation to a specific CPU family (e.g.&nbsp;<code>-mtune=native</code> for <code>gcc</code>) can give worthwhile performance gains, especially on older architectures such as <code>ix86</code>.</p>
</section>
<section id="making-manuals" class="level3 subsection" data-number="11.3.4">
<h3 class="subsection anchored" data-number="11.3.4" data-anchor-id="making-manuals"><span class="header-section-number">11.3.4</span> Making manuals</h3>
<p>The default settings for making the manuals are controlled by <code>R_RD4PDF</code> and <code>R_PAPERSIZE</code>.</p>
</section>
</section>
<section id="setting-the-shell" class="level2 section" data-number="11.4">
<h2 class="section anchored" data-number="11.4" data-anchor-id="setting-the-shell"><span class="header-section-number">11.4</span> Setting the shell</h2>
<p>By default the shell scripts such as <code>R</code> will be <code>#!/bin/sh</code> scripts (or using the <code>SHELL</code> chosen by <code>configure</code>). This is almost always satisfactory, but on a few systems <code>/bin/sh</code> is not a Bourne shell or clone, and the shell to be used can be changed by setting the configure variable <code>R_SHELL</code> to a suitable value (a full path to a shell, e.g. <code>/usr/local/bin/bash</code>).</p>
</section>
<section id="using-make" class="level2 section" data-number="11.5">
<h2 class="section anchored" data-number="11.5" data-anchor-id="using-make"><span class="header-section-number">11.5</span> Using make</h2>
<p>To build in a separate directory you need a <code>make</code> that supports the <code>VPATH</code> variable, for example GNU <code>make</code> and <code>dmake</code>.</p>
<p>If you want to use a <code>make</code> by another name, for example if your GNU <code>make</code> is called <code>gmake</code>, you need to set the variable <code>MAKE</code> at configure time, for example</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>.<span class="sc">/</span>configure MAKE<span class="ot">=</span>gmake</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="using-fortran" class="level2 section" data-number="11.6">
<h2 class="section anchored" data-number="11.6" data-anchor-id="using-fortran"><span class="header-section-number">11.6</span> Using Fortran</h2>
<p>To compile R, you need a Fortran 90 compiler. The current default is to search for <code>gfortran</code>, <code>g95</code>, <code>xlf95</code> <code>f95</code>, <code>fort</code>, <code>ifort</code>, <code>ifc</code>, <code>efc</code>, <code>pgfortran</code>, <code>pgf95</code> <code>lf95</code>, <code>ftn</code>, <code>nagfor</code>, <code>xlf90</code>, <code>f90</code>, <code>pgf90</code>, <code>pghpf</code>, <code>epcf90</code>. (Note that these are searched for by name, without checking the standard of Fortran they support.) The command and flags used should support fixed-form Fortran with extension <code>.f</code>: in the unusual case that a specific flag is needed for free-form Fortran with extension <code>.f90</code> or <code>.f95</code>, this can be specified as part of <code>FCFLAGS</code>.</p>
<p>The search mechanism can be changed using the configure variable <code>FC</code> which specifies the command that runs the Fortran compiler. If your Fortran compiler is in a non-standard location, you should set the environment variable <code>PATH</code> accordingly before running <code>configure</code>, or use the configure variable <code>FC</code> to specify its full path.</p>
<p>If your Fortran libraries are in slightly peculiar places, you should also look at <code>LD_LIBRARY_PATH</code> (or your system’s equivalent) to make sure that all libraries are on this path.</p>
<p>Note that only Fortran compilers which convert identifiers to lower case are supported.</p>
<p>You must set whatever compilation flags (if any) are needed to ensure that Fortran <code>integer</code> is equivalent to a C <code>int</code> pointer and Fortran <code>double precision</code> is equivalent to a C <code>double</code> pointer. This is checked during the configuration process.</p>
<p>Some of the Fortran code makes use of <code>DOUBLE COMPLEX</code> and <code>COMPLEX*16</code> variables. This is checked for at configure time, as well as its equivalence to the <code>Rcomplex</code> C structure defined in <code>R_ext/Complex.h</code>.</p>
<p><code>gfortran</code>&nbsp;10 by default gives a compilation error for the previously widespread practice of passing a Fortran array element where an array is expected, or a scalar instead of a length-one array. See <a href="https://gcc.gnu.org/gcc-10/porting_to.html" class="uri">https://gcc.gnu.org/gcc-10/porting_to.html</a>.</p>
</section>
<section id="compile-and-load-flags" class="level2 section" data-number="11.7">
<h2 class="section anchored" data-number="11.7" data-anchor-id="compile-and-load-flags"><span class="header-section-number">11.7</span> Compile and load flags</h2>
<p>A wide range of flags can be set in the file <code>config.site</code> or as configure variables on the command line. We have already mentioned</p>
<dl>
<dt><code>CPPFLAGS</code></dt>
<dd><p>header file search directory (<code>-I</code>) and any other miscellaneous options for the C and C++ preprocessors and compilers</p>
</dd>
<dt><code>LDFLAGS</code></dt>
<dd><p>path (<code>-L</code>), stripping (<code>-s</code>) and any other miscellaneous options for the linker</p>
</dd>
</dl>
<p>and others include</p>
<dl>
<dt><code>CFLAGS</code></dt>
<dd><p>debugging and optimization flags, C</p>
</dd>
<dt><code>MAIN_CFLAGS</code></dt>
<dd><p>ditto, for compiling the main program (e.g.&nbsp;when profiling)</p>
</dd>
<dt><code>SHLIB_CFLAGS</code></dt>
<dd><p>for shared objects (no known examples)</p>
</dd>
<dt><code>FFLAGS</code></dt>
<dd><p>debugging and optimization flags, fixed-form Fortran</p>
</dd>
<dt><code>FCFLAGS</code></dt>
<dd><p>debugging and optimization flags, free-form Fortran</p>
</dd>
<dt><code>SAFE_FFLAGS</code></dt>
<dd><p>ditto for source files which need exact floating point behaviour</p>
</dd>
<dt><code>MAIN_FFLAGS</code></dt>
<dd><p>ditto, for compiling the main program (e.g.&nbsp;when profiling)</p>
</dd>
<dt><code>SHLIB_FFLAGS</code></dt>
<dd><p>for shared objects (no known examples)</p>
</dd>
<dt><code>MAIN_LDFLAGS</code></dt>
<dd><p>additional flags for the main link</p>
</dd>
<dt><code>SHLIB_LDFLAGS</code></dt>
<dd><p>additional flags for linking the shared objects</p>
</dd>
<dt><code>LIBnn</code></dt>
<dd><p>the primary library directory, <code>lib</code> or <code>lib64</code></p>
</dd>
<dt><code>CPICFLAGS</code></dt>
<dd><p>special flags for compiling C code to be turned into a shared object</p>
</dd>
<dt><code>FPICFLAGS</code></dt>
<dd><p>special flags for compiling Fortran code to be turned into a shared object</p>
</dd>
<dt><code>CXXPICFLAGS</code></dt>
<dd><p>special flags for compiling C++ code to be turned into a shared object</p>
</dd>
<dt><code>DEFS</code></dt>
<dd><p>defines to be used when compiling C code in R itself</p>
</dd>
</dl>
<p>Library paths specified as <code>-L/lib/path</code> in <code>LDFLAGS</code> are collected together and prepended to <code>LD_LIBRARY_PATH</code> (or your system’s equivalent), so there should be no need for <code>-R</code> or <code>-rpath</code> flags.</p>
<p>Variables such as <code>CPICFLAGS</code> are determined where possible by <code>configure</code>. Some systems allows two types of PIC flags, for example <code>-fpic</code> and <code>-fPIC</code>, and if they differ the first allows only a limited number of symbols in a shared object. Since R as a shared library has about 6200 symbols, if in doubt use the larger version.</p>
<p>Other variables often set by <code>configure</code> include <code>MAIN_LDFLAGS</code>, <code>SAFE_FFLAGS</code>, <code>SHLIB_LDFLAGS</code> and <code>SHLIB_CXXLDFLAGS</code>: see file <code>config.site</code> in the sources for more documentation on these and others.</p>
<p>To compile a profiling version of R, one might for example want to use <code>MAIN_CFLAGS=-pg</code>, <code>MAIN_FFLAGS=-pg</code>, <code>MAIN_LDFLAGS=-pg</code> on platforms where <code>-pg</code> cannot be used with position-independent code.</p>
<p><strong>Beware</strong>: it may be necessary to set <code>CFLAGS</code> and <code>FFLAGS</code> in ways compatible with the libraries to be used: one possible issue is the alignment of doubles, another is the way structures are passed.</p>
<p>On some platforms <code>configure</code> will select additional flags for <code>CFLAGS</code>, <code>CPPFLAGS</code> and <code>LIBS</code> in <code>R_XTRA_CFLAGS</code> (and so on). These are for options which are always required, for example to force IEC&nbsp;60559 compliance.</p>
</section>
<section id="maintainer-mode" class="level2 section page-columns page-full" data-number="11.8">
<h2 class="section anchored" data-number="11.8" data-anchor-id="maintainer-mode"><span class="header-section-number">11.8</span> Maintainer mode</h2>
<p>There are several files that are part of the R sources but can be re-generated from their own sources by configuring with option <code>--enable-maintainer-mode</code> and then running <code>make</code> in the build directory. This requires other tools to be installed, discussed in the rest of this section.</p>
<div class="page-columns page-full"><p>File <code>configure</code> is created from <code>configure.ac</code> and the files under <code>m4</code> by <code>autoconf</code> and <code>aclocal</code> (part of the <strong>automake</strong> package). There is a formal version requirement on <code>autoconf</code> of 2.69 or later, but it is unlikely that anything other than the most recent versions<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> have been thoroughly tested.</p><div class="no-row-height column-margin column-container"><li id="fn3" role="doc-endnote"><p><sup>3</sup>&nbsp;at the time of revision of this para in late 2021, <strong>autoconf-2.71</strong> and <strong>automake-1.16.5</strong>.</p></li></div></div>
<p>File <code>src/include/config.h</code> is created by <code>autoheader</code> (part of <strong>autoconf</strong>).</p>
<p>Grammar files <code>*.y</code> are converted to C sources by an implementation of <code>yacc</code>, usually <code>bison -y</code>: these are found in <code>src/main</code> and <code>src/library/tools/src</code>. It is known that earlier versions of <code>bison</code> generate code which reads (and in some cases writes) outside array bounds: <code>bison</code> 2.6.1 was found to be satisfactory.</p>
<div class="page-columns page-full"><p>The ultimate sources for package <strong>compiler</strong> are in its <code>noweb</code> directory. To re-create the sources from <code>src/library/compiler/noweb/compiler.nw</code>, the command <code>notangle</code> is required. Some Linux distributions include this command in package <strong>noweb</strong>. It can also be installed from the sources at <a href="https://www.cs.tufts.edu/~nr/noweb/" class="uri">https://www.cs.tufts.edu/~nr/noweb/</a><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. The package sources are only re-created even in maintainer mode if <code>src/library/compiler/noweb/compiler.nw</code> has been updated.</p><div class="no-row-height column-margin column-container"><li id="fn4" role="doc-endnote"><p><sup>4</sup>&nbsp;The links there have proved difficult to access, in which case grab the copy made available at <a href="https://developer.r-project.org/noweb-2.11b.tgz" class="uri">https://developer.r-project.org/noweb-2.11b.tgz</a>.</p></li></div></div>


</section>

</main> <!-- /main -->
<script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    setTimeout(function() {
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.toc-action)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
          // default icon
          link.classList.add("external");
      }
    }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Essential-and-useful-other-programs-under-a-Unix-alike.html">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Essential and useful other programs under a Unix-alike</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Platform-notes.html">
        <span class="nav-page-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Platform notes</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">A re-styled version of the original R manuals at <a href="https://cran.r-project.org/manuals.html" class="uri">https://cran.r-project.org/manuals.html</a></div>   
    <div class="nav-footer-right">Built using <a href="https://quarto.org">Quarto</a></div>
  </div>
</footer>


</body></html>