<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>6&nbsp; Add-on packages – R Manuals :: R Installation and Administration ¶</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./Internationalization.html" rel="next">
<link href="./Running-R.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-a3a19fe14a07cca10d92c437965ca696.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">R Manuals :: R Installation and Administration ¶</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-manuals" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Manuals</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-manuals">    
        <li>
    <a class="dropdown-item" href="./../r-intro/index.html">
 <span class="dropdown-text">An Introduction to R ¶</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-data/index.html">
 <span class="dropdown-text">R Data Import/Export ¶</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-admin/index.html">
 <span class="dropdown-text">R Installation and Administration ¶</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-exts/index.html">
 <span class="dropdown-text">Writing R Extensions ¶</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-lang/index.html">
 <span class="dropdown-text">R Language Definition ¶</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./../r-ints/index.html">
 <span class="dropdown-text">R Internals ¶</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Add-on-packages.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Add-on packages</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Top (R Installation and Administration)</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Obtaining-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Obtaining R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Installing-R-under-Unix-alikes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Installing R under Unix-alikes</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Installing-R-under-Windows.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Installing R under Windows</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Installing-R-under-macOS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Installing R under macOS</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Running-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Running R</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Add-on-packages.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Add-on packages</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Internationalization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Internationalization and Localization</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Choosing-between-32--and-64-bit-builds.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Choosing between 32- and 64-bit builds</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./The-standalone-Rmath-library.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">The standalone Rmath library</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Function-and-variable-index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Function and variable index</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Environment-variable-index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Environment variable index</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Concept-index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concept index</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Essential-and-useful-other-programs-under-a-Unix-alike.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Essential and useful other programs under a Unix-alike</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Configuration-on-a-Unix-alike.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Configuration on a Unix-alike</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Platform-notes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Platform notes</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#default-packages" id="toc-default-packages" class="nav-link active" data-scroll-target="#default-packages"><span class="header-section-number">6.1</span> Default packages</a></li>
  <li><a href="#managing-libraries" id="toc-managing-libraries" class="nav-link" data-scroll-target="#managing-libraries"><span class="header-section-number">6.2</span> Managing libraries</a></li>
  <li><a href="#installing-packages" id="toc-installing-packages" class="nav-link" data-scroll-target="#installing-packages"><span class="header-section-number">6.3</span> Installing packages</a>
  <ul class="collapse">
  <li><a href="#windows" id="toc-windows" class="nav-link" data-scroll-target="#windows"><span class="header-section-number">6.3.1</span> Windows</a></li>
  <li><a href="#macos" id="toc-macos" class="nav-link" data-scroll-target="#macos"><span class="header-section-number">6.3.2</span> macOS</a></li>
  <li><a href="#customizing-package-compilation" id="toc-customizing-package-compilation" class="nav-link" data-scroll-target="#customizing-package-compilation"><span class="header-section-number">6.3.3</span> Customizing package compilation</a></li>
  <li><a href="#multiple-sub-architectures" id="toc-multiple-sub-architectures" class="nav-link" data-scroll-target="#multiple-sub-architectures"><span class="header-section-number">6.3.4</span> Multiple sub-architectures</a></li>
  <li><a href="#byte-compilation" id="toc-byte-compilation" class="nav-link" data-scroll-target="#byte-compilation"><span class="header-section-number">6.3.5</span> Byte-compilation</a></li>
  <li><a href="#external-software" id="toc-external-software" class="nav-link" data-scroll-target="#external-software"><span class="header-section-number">6.3.6</span> External software</a></li>
  </ul></li>
  <li><a href="#updating-packages" id="toc-updating-packages" class="nav-link" data-scroll-target="#updating-packages"><span class="header-section-number">6.4</span> Updating packages</a></li>
  <li><a href="#removing-packages" id="toc-removing-packages" class="nav-link" data-scroll-target="#removing-packages"><span class="header-section-number">6.5</span> Removing packages</a></li>
  <li><a href="#setting-up-a-package-repository" id="toc-setting-up-a-package-repository" class="nav-link" data-scroll-target="#setting-up-a-package-repository"><span class="header-section-number">6.6</span> Setting up a package repository</a></li>
  <li><a href="#checking-installed-source-packages" id="toc-checking-installed-source-packages" class="nav-link" data-scroll-target="#checking-installed-source-packages"><span class="header-section-number">6.7</span> Checking installed source packages</a>
  <ul class="collapse">
  <li><a href="#footnotes" id="toc-footnotes" class="nav-link" data-scroll-target="#footnotes"><span class="header-section-number">6.7.1</span> Footnotes</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Add-on packages</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>Next: <a href="Internationalization.html#internationalization" accesskey="n" rel="next">Internationalization and Localization</a>, Previous: <a href="Running-R.html" accesskey="p" rel="prev">Running R</a>, Up: <a href="index.html" accesskey="u" rel="up">R Installation and Administration</a> &nbsp; [<a href="index.html#sec_contents" rel="contents" title="Table of contents">Contents</a>][<a href="Function-and-variable-index.html" rel="index" title="Index">Index</a>]</p>
<p>It is helpful to use the correct terminology. A <em>package</em> is loaded from a <em>library</em> by the function <code class="code">library()</code>. Thus a library is a directory containing installed packages; the main library is <var class="var">R_HOME</var><samp class="file">/library</samp>, but others can be used, for example by <span id="index-R_005fLIBS" class="index-entry-id"></span> setting the environment variable <code class="env">R_LIBS</code> or using the R function <code class="code">.libPaths()</code>. To avoid any confusion you will often see a library directory referred to as a ‘library tree’.</p>
<section id="default-packages" class="level2 section" data-number="6.1">
<h2 class="section anchored" data-number="6.1" data-anchor-id="default-packages"><span class="header-section-number">6.1</span> Default packages</h2>
<p>The set of packages loaded on startup is by default</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">getOption</span>(<span class="st">"defaultPackages"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">"datasets"</span>  <span class="st">"utils"</span>     <span class="st">"grDevices"</span> <span class="st">"graphics"</span>  <span class="st">"stats"</span>     <span class="st">"methods"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(plus, of course, <strong>base</strong>) and this can be changed by setting the option in startup code (e.g.&nbsp;in <samp class="file">~/.Rprofile</samp>). It is initially <span id="index-R_005fDEFAULT_005fPACKAGES" class="index-entry-id"></span> set to the value of the environment variable <code class="env">R_DEFAULT_PACKAGES</code> if set (as a comma-separated list). Setting <code class="env">R_DEFAULT_PACKAGES=NULL</code> ensures that only package <strong>base</strong> is loaded.</p>
<p>Changing the set of default packages is normally used to reduce the set for speed when scripting: in particular not using <strong>methods</strong> will reduce the start-up time by a factor of up to two. But it can also be used to customize R, e.g.&nbsp;for class use. <code class="command">Rscript</code> also checks the environment variable <code class="env">R_SCRIPT_DEFAULT_PACKAGES</code>; <span id="index-R_005fSCRIPT_005fDEFAULT_005fPACKAGES" class="index-entry-id"></span> if set, this takes precedence over <code class="env">R_DEFAULT_PACKAGES</code>.</p>
</section>
<section id="managing-libraries" class="level2 section" data-number="6.2">
<h2 class="section anchored" data-number="6.2" data-anchor-id="managing-libraries"><span class="header-section-number">6.2</span> Managing libraries</h2>
<p>R packages are installed into <em>libraries</em>, which are directories in the file system containing a subdirectory for each package installed there.</p>
<p>R comes with a single library, <var class="var">R_HOME</var><samp class="file">/library</samp> which is the value of the R object <samp class="samp">.Library</samp>’ containing the standard and recommended<a href="#FOOT29" id="DOCF29" class="footnote"><sup>29</sup></a> packages. Both sites and users can create others and make use of them (or not) in an R session. At the lowest level <samp class="samp">.libPaths()</samp>’ can be used to add paths to the collection of libraries or to report the current collection.</p>
<p><span id="index-Libraries_002c-site" class="index-entry-id"></span> <span id="index-Site-libraries" class="index-entry-id"></span></p>
<p>R will automatically make use of a site-specific library <var class="var">R_HOME</var><samp class="file">/site-library</samp> if this exists (it does not in a vanilla R installation). This location can be overridden by setting<a href="#FOOT30" id="DOCF30" class="footnote"><sup>30</sup></a> <samp class="samp">.Library.site</samp>’ in <var class="var">R_HOME</var><samp class="file">/etc/Rprofile.site</samp>, or (not recommended) by setting the <span id="index-R_005fLIBS_005fSITE" class="index-entry-id"></span> environment variable <code class="env">R_LIBS_SITE</code>.</p>
<p><span id="index-Libraries_002c-user" class="index-entry-id"></span> <span id="index-User-libraries" class="index-entry-id"></span> <span id="index-R_005fLIBS_005fUSER" class="index-entry-id"></span></p>
<p>Users can have one or more libraries, normally specified by the environment variable <code class="env">R_LIBS_USER</code>. This has a default value (to see it, use <samp class="samp">Sys.getenv("R_LIBS_USER")</samp>’ within an R session), but that is only used if the corresponding directory actually exists (which by default it will not).</p>
<p>Both <code class="env">R_LIBS_USER</code> and <code class="env">R_LIBS_SITE</code> can specify multiple library paths, separated by colons (semicolons on Windows).</p>
</section>
<section id="installing-packages" class="level2 section" data-number="6.3">
<h2 class="section anchored" data-number="6.3" data-anchor-id="installing-packages"><span class="header-section-number">6.3</span> Installing packages</h2>
<p>Packages may be distributed in source form or compiled binary form. Installing source packages which contain C/C++/Fortran code requires that compilers and related tools be installed. Binary packages are platform-specific and generally need no special tools to install, but see the documentation for your platform for details.</p>
<p>Note that you may need to specify implicitly or explicitly the library to which the package is to be installed. This is only an issue if you have more than one library, of course.</p>
<p>Ensure that the environment variable <code class="env">TMPDIR</code> is either unset (and <samp class="file">/tmp</samp> exists and can be written in and executed from) or is the absolute path to a valid temporary directory, not containing spaces.</p>
<p>For most users it suffices to call <samp class="samp">install.packages(</samp><var class="var">pkgname</var><samp class="samp">)</samp>’ or its GUI equivalent if the intention is to install a CRAN package and Internet access is available.<a href="#FOOT31" id="DOCF31" class="footnote"><sup>31</sup></a> On most systems <samp class="samp">install.packages()</samp>’ will allow packages to be selected from a list box (typically with tens of thousands of items).</p>
<p>To install packages from source on a Unix-alike use in a terminal</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">R</span> CMD INSTALL <span class="at">-l</span> /path/to/library pkg1 pkg2 ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The part <samp class="samp">-l /path/to/library</samp>’ can be omitted, in which case the first library of a normal R session is used (that shown by <code class="code">.libPaths()[1]</code>).</p>
<p>There are a number of options available: use <code class="code">R CMD INSTALL --help</code> to see the current list.</p>
<p>Alternatively, packages can be downloaded and installed from within R. First choose your nearest CRAN mirror using <code class="command">chooseCRANmirror()</code>. Then download and install packages <strong>pkg1</strong> and <strong>pkg2</strong> by</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">"pkg1"</span>, <span class="st">"pkg2"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The essential dependencies of the specified packages will also be fetched. Unless the library is specified (argument <code class="code">lib</code>) the first library in the library search path is used: if this is not writable, R will ask the user (in an interactive session) if the default personal library should be created, and if allowed to will install the packages there.</p>
<p>If you want to fetch a package and all those it depends on (in any way) that are not already installed, use e.g.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">install.packages</span>(<span class="st">"Rcmdr"</span>, <span class="at">dependencies =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><code class="code">install.packages</code> can install a source package from a local <samp class="file">.tar.gz</samp> file (or a URL to such a file) by setting argument <code class="code">repos</code> to <code class="code">NULL</code>: this will be selected automatically if the name given is a single <samp class="file">.tar.gz</samp> file.</p>
<p><code class="code">install.packages</code> can look in several repositories, specified as a character vector by the argument <code class="code">repos</code>: these can include a CRAN mirror, Bioconductor, R-forge, rforge.net, local archives, local files, …). Function <code class="code">setRepositories()</code> can select amongst those repositories that the R installation is aware of.</p>
<p>Something which sometimes puzzles users is that <code class="code">install.packages()</code> may report that a package which they believe should be available is not found. Some possible reasons:</p>
<ul>
<li><p>The package, such as <strong>grid</strong> or <strong>tcltk</strong>, is part of R itself and not otherwise available.</p></li>
<li><p>The package is not in the available repositories, so check which have been selected by</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getOption</span>(<span class="st">"repos"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p>The package is available, but not for the current version of R or for the type of OS (Unix/Windows). To retrieve the information on available versions of package <var class="var">pkg</var>, use</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>av <span class="ot">&lt;-</span> <span class="fu">available.packages</span>(<span class="at">filters=</span><span class="fu">list</span>())</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>av[av[, <span class="st">"Package"</span>] <span class="sc">==</span> pkg, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>in your R session, and look at the <samp class="samp">Depends</samp>’ and <samp class="samp">OS_type</samp>’ fields (there may be more than one matching entry). If the package depends on a version of R later than the one in use, it is possible that an earlier version is available which will work with your version of R: for CRAN look for ‘Old sources’ on the package’s CRAN landing page and manually retrieve an appropriate version (of comparable age to your version of R).</p></li>
</ul>
<p>Naive users sometimes forget that as well as installing a package, they have to use <code class="code">library</code> to make its functionality available.</p>
<section id="windows" class="level3 subsection" data-number="6.3.1">
<h3 class="subsection anchored" data-number="6.3.1" data-anchor-id="windows"><span class="header-section-number">6.3.1</span> Windows</h3>
<p>What <code class="code">install.packages</code> does by default is different on Unix-alikes (except macOS) and Windows. On Unix-alikes it consults the list of available <em>source</em> packages on CRAN (or other repositories), downloads the latest version of the package sources, and installs them (via <code class="code">R CMD INSTALL</code>). On <samp class="samp">x86_64</samp>’ Windows it looks (by default) first at the list of <em>binary</em> versions of packages available for your version of R and downloads the latest versions (if any). If no binary version is available or the source version is newer, it will install the source versions of packages without compiled C/C++/Fortran code, and offer to do so for those with, if <code class="command">make</code> is available (and this can be tuned by option <code class="code">"install.packages.compile.from.source"</code>).</p>
<p>[At present binary packages are not distributed for <samp class="samp">aarch64</samp>’ Windows, so most of this subsection only applies to <samp class="samp">x86_64</samp>’.]</p>
<p>On Windows <code class="code">install.packages</code> can also install a binary package from a local <samp class="file">zip</samp> file (or the URL of such a file) by setting argument <code class="code">repos</code> to <code class="code">NULL</code>. <code class="code">Rgui.exe</code> has a menu <code class="code">Packages</code> with a GUI interface to <code class="code">install.packages</code>, <code class="code">update.packages</code> and <code class="code">library</code>.</p>
<p>Windows binary packages for R were distributed as a single binary containing either or both architectures (32- and 64-bit). Prior to R 4.2.0, they might contain only the 32-bit architecture.</p>
<p><code class="command">R CMD INSTALL</code> works in Windows to install source packages. No additional tools are needed if the package does not contain compiled code, and <code class="code">install.packages(type="source")</code> will work for such packages. Those with compiled code need the tools (see <a href="Installing-R-under-Windows.html#the-windows-toolset" class="ref">The Windows toolset</a>). The tools are found automatically by R when installed by the toolset installer. See <a href="https://cran.r-project.org/bin/windows/base/howto-.html" class="uref">Building {No value for ‘RWTVERSION’} and packages on Windows</a> for more details.</p>
<p>Occasional permission problems after unpacking source packages have been seen on some systems: these have been circumvented by setting the environment variable <code class="env">R_INSTALL_TAR</code> to <samp class="samp">tar.exe</samp>’. <span id="index-R_005fINSTALL_005fTAR" class="index-entry-id"></span></p>
<p>If you have only a source package that is known to work with current R and just want a binary Windows build of it, you could make use of the building service offered at <a href="https://win-builder.r-project.org/" class="uref">https://win-builder.r-project.org/</a>.</p>
<p>For almost all packages <code class="command">R CMD INSTALL</code> will attempt to install both 32- and 64-bit builds of a package if run from a 32/64-bit install of R (only 64-bit builds and installs are supported since R 4.2.0). It will report success if the installation of the architecture of the running <code class="command">R</code> succeeded, whether or not the other architecture was successfully installed. The exceptions are packages with a non-empty <samp class="file">configure.win</samp> script or which make use of <samp class="file">src/Makefile.win</samp>. If <samp class="file">configure.win</samp> does something appropriate to both architectures use<a href="#FOOT32" id="DOCF32" class="footnote"><sup>32</sup></a> option <samp class="option">--force-biarch</samp>: otherwise <code class="command">R CMD INSTALL --merge-multiarch</code> can be applied to a source tarball to merge separate 32- and 64-bit installs. (This can only be applied to a tarball, and will only succeed if both installs succeed.)</p>
<p>If you have a package without compiled code and no Windows-specific help, you can zip up an installation on another OS and install from that zip file on Windows. However, such a package can be installed from the sources on Windows without any additional tools.</p>
</section>
<section id="macos" class="level3 subsection" data-number="6.3.2">
<h3 class="subsection anchored" data-number="6.3.2" data-anchor-id="macos"><span class="header-section-number">6.3.2</span> macOS</h3>
<p>On macOS <code class="code">install.packages</code> works as it does on other Unix-alike systems, but there is an additional type <code class="code">binary</code> (available for the CRAN distribution but not when compiling R from source) which can be passed to <code class="code">install.packages</code> in order to download and install binary packages from a suitable repository. These binary package files for macOS have the extension <samp class="samp">.tgz</samp>’. The <span class="small">R.APP</span> GUI provides menus for installation of either binary or source packages, from CRAN, other repositories or local files.</p>
<p>On R builds using binary packages, the default is type <code class="code">both</code>: this looks first at the list of binary packages available for your version of R and installs the latest versions (if any). If no binary version is available or the source version is newer, it will install the source versions of packages without compiled C/C++/Fortran code and offer to do so for those with, if <code class="command">make</code> is available.</p>
<p>Note that most binary packages which include compiled code are tied to a particular series (e.g.&nbsp;R 4.5.x or 4.4.x) of R.</p>
<p>Installing source packages which do not contain compiled code should work with no additional tools. For others you will need the ‘Command Line Tools’ for <code class="command">Xcode</code> and compilers which match those used to build R, plus a Fortran compiler for packages which contain Fortran code: see <a href="Platform-notes.html#macos" class="ref">macOS</a>. Packages with C/C++ source code which link to Fortran libraries (which include the BLAS and LAPACK libraries) will need either the Fortran compiler or, for CRAN binary distributions of R, to specify</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>FLIBS <span class="ot">=</span> <span class="sc">-</span>L<span class="sc">/</span>Library<span class="sc">/</span>Frameworks<span class="sc">/</span>R.framework<span class="sc">/</span>Resources<span class="sc">/</span>lib <span class="sc">-</span>lgfortran <span class="sc">-</span>lquadmath</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>in a <samp class="file">Makevars</samp> file (see the next section) to point to the Fortran libraries in the binary distribution.</p>
<p>Package <a href="https://CRAN.R-project.org/package=rJava" class="url"><strong>rJava</strong></a> and those which depend on it need a Java runtime installed and several packages need X11 installed, including those using Tk. See <a href="Platform-notes.html#macos" class="ref">macOS</a> and <a href="Platform-notes.html#java-_0028macos_0029" class="ref">Java</a>. Package <a href="https://CRAN.R-project.org/package=rjags" class="url"><strong>rjags</strong></a> needs a build of JAGS installed under <samp class="file">/usr/local</samp>, such as those at <a href="https://sourceforge.net/projects/mcmc-jags/files/JAGS/4.x/Mac%20OS%20X/" class="uref">https://sourceforge.net/projects/mcmc-jags/files/JAGS/4.x/Mac%20OS%20X/</a>.</p>
<p>Tcl/Tk extension <code class="code">BWidget</code> used to be distributed with R but no longer is; <code class="code">Tktable</code> has been distributed with recent versions of R.</p>
<p>The default compilers specified are shown in file <samp class="file">/Library/Frameworks/R.framework/Resources/etc/Makeconf</samp>. At the time of writing those settings assumed that the C, Fortran and C++ compilers were on the path (see <a href="Platform-notes.html#macos" class="ref">macOS</a>). The settings can be changed, either by editing that file or in a file such as <samp class="file">~/.R/Makevars</samp> (see the next section). Entries which may need to be changed include <samp class="samp">CC</samp>‘, <samp class="samp">CXX</samp>’, <samp class="samp">FC</samp>‘, <samp class="samp">FLIBS</samp>’ and the corresponding flags, and perhaps <samp class="samp">CXXCPP</samp>‘, <samp class="samp">DYLIB_LD</samp>’, <samp class="samp">MAIN_LD</samp>‘, <samp class="samp">SHLIB_CXXLD</samp>’ and <samp class="samp">SHLIB_LD</samp>‘, as well as their <samp class="samp">CXX11</samp>’, <samp class="samp">CXX14</samp>‘, <samp class="samp">CXX17</samp>’ and <samp class="samp">CXX20</samp>’ variants.</p>
<p>So for example you could select a specific LLVM <code class="command">clang</code> for both C and C++ with extensive checking by having in <samp class="file">~/.R/Makevars</samp></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode makefile code-with-copy"><code class="sourceCode makefile"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dt">SDK</span><span class="ch">=</span><span class="st">/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="dt">CC</span> <span class="ch">=</span><span class="st"> /usr/local/clang/bin/clang -isysroot </span><span class="ch">$(</span><span class="dt">SDK</span><span class="ch">)</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX</span> <span class="ch">=</span><span class="st"> /usr/local/clang/bin/clang++ -isysroot </span><span class="ch">$(</span><span class="dt">SDK</span><span class="ch">)</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX11</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$C</span><span class="st">XX</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX14</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$C</span><span class="st">XX</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX17</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$C</span><span class="st">XX</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX20</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$C</span><span class="st">XX</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX23</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$C</span><span class="st">XX</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="dt">CFLAGS</span> <span class="ch">=</span><span class="st"> -g -O2 -Wall -pedantic -Wconversion -Wno-sign-conversion</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="dt">CXXFLAGS</span> <span class="ch">=</span><span class="st"> -g -O2 -Wall -pedantic -Wconversion -Wno-sign-conversion</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX11FLAGS</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$C</span><span class="st">XXFLAGS</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX14FLAGS</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$C</span><span class="st">XXFLAGS</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX17FLAGS</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$C</span><span class="st">XXFLAGS</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX20FLAGS</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$C</span><span class="st">XXFLAGS</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX23FLAGS</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$C</span><span class="st">XXFLAGS</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(the current SDK can be found by running <code class="command">xcrun -show-sdk-path</code>) and for the current macOS distribution of <code class="command">gfortran</code> at <a href="https://mac.r-project.org/tools/" class="uref">https://mac.r-project.org/tools/</a></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>FC <span class="ot">=</span> <span class="er">/</span>opt<span class="sc">/</span>gfortran<span class="sc">/</span>bin<span class="sc">/</span>gfortran</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>(arm64)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>FLIBS <span class="ot">=</span>  <span class="sc">-</span>L<span class="sc">/</span>opt<span class="sc">/</span>gfortran<span class="sc">/</span>lib<span class="sc">/</span>gcc<span class="sc">/</span>aarch64<span class="sc">-</span>apple<span class="sc">-</span>darwin20<span class="fl">.0</span><span class="sc">/</span><span class="dv">14</span>.<span class="fl">2.0</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span>L<span class="sc">/</span>opt<span class="sc">/</span>gfortran<span class="sc">/</span>lib <span class="sc">-</span>lgfortran <span class="sc">-</span>lemutls_w <span class="sc">-</span>lheapt_w <span class="sc">-</span>lquadmath</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>(Intel)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>FLIBS <span class="ot">=</span>  <span class="sc">-</span>L<span class="sc">/</span>opt<span class="sc">/</span>gfortran<span class="sc">/</span>lib<span class="sc">/</span>gcc<span class="sc">/</span>x86_64<span class="sc">-</span>apple<span class="sc">-</span>darwin20<span class="fl">.0</span><span class="sc">/</span><span class="dv">14</span>.<span class="fl">2.0</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span>L<span class="sc">/</span>opt<span class="sc">/</span>gfortran<span class="sc">/</span>lib <span class="sc">-</span>lgfortran <span class="sc">-</span>lquadmath</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(line broken here for the manual only).</p>
<p>If that <code class="command">clang</code> build supports OpenMP, you can add</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode makefile code-with-copy"><code class="sourceCode makefile"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="dt">SHLIB_OPENMP_CFLAGS</span> <span class="ch">=</span><span class="st"> -fopenmp</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="dt">SHLIB_OPENMP_CXXFLAGS</span> <span class="ch">=</span><span class="st"> -fopenmp</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>to compile OpenMP-using packages. It will also be necessary to arrange for the <code class="code">libomp.dylib</code> library to be found at both install time and run time, for example by copying/linking it somewhere that is searched such as <samp class="file">/usr/local/lib</samp>.</p>
<p>Apple includes many Open Source libraries in macOS but increasingly without the corresponding headers (not even in Xcode nor the Command Line Tools): they are often rather old versions. If installing packages from source using them it is usually easiest to install a statically-linked up-to-date copy of the Open Source package from its sources or from <a href="https://mac.r-project.org/bin/" class="uref">https://mac.r-project.org/bin/</a>. But sometimes it is desirable/necessary to use Apple’s dynamically linked library, in which case appropriate headers could be extracted from the sources<a href="#FOOT33" id="DOCF33" class="footnote"><sup>33</sup></a> available <em>via</em> <a href="https://opensource.apple.com/releases" class="uref">https://opensource.apple.com/releases</a> – this has been used for <code class="code">iodbc</code>.</p>
<p>Some care may be needed with selecting compilers when installing external software for use with packages. The ‘system’ compilers as used when building R are <code class="command">clang</code> and <code class="command">clang++</code>, but the Apple toolchain also provides compilers called <code class="command">gcc</code> and <code class="command">g++</code> which despite their names are based on LLVM and <code class="code">libc++</code> like the system ones and which behave in almost the same way as the system ones. Most Open Source software has a <code class="command">configure</code> script developed using GNU <code class="command">autoconf</code> and hence will select <code class="command">gcc</code> and <code class="command">g++</code> as the default compilers: this usually works fine. For consistency one can use</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode makefile code-with-copy"><code class="sourceCode makefile"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>./configure CC=clang CFLAGS=-O2 CXX=clang++ CXXFLAGS=-O2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(avoiding <code class="command">autoconf</code>’s default <samp class="option">-g</samp>). <code class="command">R CMD INSTALL</code> and <code class="code">install.packages()</code> try to invoke <code class="command">configure</code> with the same compilers and flags used to build R.</p>
</section>
<section id="customizing-package-compilation" class="level3 subsection" data-number="6.3.3">
<h3 class="subsection anchored" data-number="6.3.3" data-anchor-id="customizing-package-compilation"><span class="header-section-number">6.3.3</span> Customizing package compilation</h3>
<p>The R system and package-specific compilation flags can be overridden or added to by setting the appropriate Make variables in the personal file <var class="var">HOME</var><samp class="file">/.R/Makevars-</samp><var class="var">R_PLATFORM</var> (but <var class="var">HOME</var><samp class="file">/.R/Makevars.win</samp> or <var class="var">HOME</var><samp class="file">/.R/Makevars.win64</samp> on Windows), or if that does not exist, <var class="var">HOME</var><samp class="file">/.R/Makevars</samp>, where <samp class="samp">R_PLATFORM</samp>’ is the platform for which R was built, as available in the <code class="code">platform</code> component of the R variable <code class="code">R.version</code>. The full path to an alternative personal file<a href="#FOOT34" id="DOCF34" class="footnote"><sup>34</sup></a> can be specified <em>via</em> the environment variable <code class="env">R_MAKEVARS_USER</code>.</p>
<p>Package developers are encouraged to use this mechanism to enable a reasonable amount of diagnostic messaging (“warnings”) when compiling, such as e.g.&nbsp;<samp class="option">-Wall -pedantic</samp> for tools from GCC, the GNU Compiler Collection, and for LLVM (<code class="command">clang</code> and <code class="command">flang</code>).</p>
<p>Note that this mechanism can also be used when it is necessary to change the optimization level whilst installing a particular package. For example</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode makefile code-with-copy"><code class="sourceCode makefile"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">## for C code</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="dt">CFLAGS</span> <span class="ch">=</span><span class="st"> -g -O -mtune=native</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">## for C++ code</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="dt">CXXFLAGS</span> <span class="ch">=</span><span class="st"> -g -O -mtune=native</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">## for C++11 code</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="dt">CXX11FLAGS</span> <span class="ch">=</span><span class="st"> -g -O -mtune=native</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="co">## for fixed-form Fortran code</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="dt">FFLAGS</span> <span class="ch">=</span><span class="st"> -g -O -mtune=native</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="co">## for C17 code</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="dt">C17FLAGS</span> <span class="ch">=</span><span class="st"> -g -O -mtune=native -Wno-strict-prototypes</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Note that if you have specified a non-default C++ or C standard, you need to set the flag(s) appropriate to that standard.</p>
<p>Another use is to override the settings in a binary installation of R. For example, for the current distribution of <code class="command">gfortran</code> at <a href="https://mac.r-project.org/tools/" class="uref">https://mac.r-project.org/tools/</a></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>FC <span class="ot">=</span> <span class="er">/</span>opt<span class="sc">/</span>gfortran<span class="sc">/</span>bin<span class="sc">/</span>gfortran</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>FLIBS <span class="ot">=</span>  <span class="sc">-</span>L<span class="sc">/</span>opt<span class="sc">/</span>gfortran<span class="sc">/</span>lib<span class="sc">/</span>gcc<span class="sc">/</span>x86_64<span class="sc">-</span>apple<span class="sc">-</span>darwin20<span class="fl">.0</span><span class="sc">/</span><span class="dv">14</span>.<span class="fl">2.0</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">-</span>L<span class="sc">/</span>opt<span class="sc">/</span>gfortran<span class="sc">/</span>lib <span class="sc">-</span>lgfortran <span class="sc">-</span>lquadmath</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>(line broken here for the manual only).</p>
<p>There is also provision for a site-wide <samp class="file">Makevars.site</samp> file under <var class="var">R_HOME</var><samp class="file">/etc</samp> (in a sub-architecture-specific directory if appropriate). This is read immediately after <samp class="file">Makeconf</samp>, and the path to an alternative file can be specified by environment variable <code class="env">R_MAKEVARS_SITE</code>.</p>
<p>Note that these mechanisms do not work with packages which fail to pass settings down to sub-makes, perhaps reading <samp class="file">etc/Makeconf</samp> in makefiles in subdirectories. Fortunately such packages are unusual.</p>
</section>
<section id="multiple-sub-architectures" class="level3 subsection" data-number="6.3.4">
<h3 class="subsection anchored" data-number="6.3.4" data-anchor-id="multiple-sub-architectures"><span class="header-section-number">6.3.4</span> Multiple sub-architectures</h3>
<p>When installing packages from their sources, there are some extra considerations on installations which use sub-architectures. These were commonly used on Windows prior to R 4.2.0 but can in principle be used on other platforms.</p>
<p>When a source package is installed by a build of R which supports multiple sub-architectures, the normal installation process installs the packages for all sub-architectures. The exceptions are</p>
<dl>
<dt><em>Unix-alikes</em></dt>
<dd>
<p>where there is an <samp class="file">configure</samp> script, or a file <samp class="file">src/Makefile</samp>.</p>
</dd>
<dt><em>Windows</em></dt>
<dd>
<p>where there is a non-empty <samp class="file">configure.win</samp> script, or a file <samp class="file">src/Makefile.win</samp> (with some exceptions where the package is known to have an architecture-independent <samp class="file">configure.win</samp>, or if <samp class="option">--force-biarch</samp> or field <samp class="samp">Biarch</samp>’ in the <samp class="file">DESCRIPTION</samp> file is used to assert so).</p>
</dd>
</dl>
<p>In those cases only the current architecture is installed. Further sub-architectures can be installed by</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">R</span> CMD INSTALL <span class="at">--libs-only</span> pkg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>using the path to <code class="command">R</code> or <code class="command">R --arch</code> to select the additional sub-architecture. There is also <code class="command">R CMD INSTALL --merge-multiarch</code> to build and merge the two architectures, starting with a source tarball.</p>
</section>
<section id="byte-compilation" class="level3 subsection" data-number="6.3.5">
<h3 class="subsection anchored" data-number="6.3.5" data-anchor-id="byte-compilation"><span class="header-section-number">6.3.5</span> Byte-compilation</h3>
<p>Packages are by default byte-compiled on installation. Byte-compilation can be controlled on a per-package basis by the <samp class="samp">ByteCompile</samp>’ field in the <samp class="file">DESCRIPTION</samp> file.</p>
</section>
<section id="external-software" class="level3 subsection" data-number="6.3.6">
<h3 class="subsection anchored" data-number="6.3.6" data-anchor-id="external-software"><span class="header-section-number">6.3.6</span> External software</h3>
<p>Some R packages contain compiled code which links to external software libraries. Unless the external library is statically linked (which is done as much as possible for binary packages on Windows and macOS), the libraries have to be found when the package is loaded and not just when it is installed. How this should be done depends on the OS (and in some cases the version).</p>
<p>For Unix-alikes except macOS the primary mechanism is the <code class="code">ld.so</code> cache controlled by <code class="command">ldconfig</code>: external dynamic libraries recorded in that cache will be found. Standard library locations will be covered by the cache, and well-designed software will add its locations (as for example <strong>openmpi</strong> does on Fedora). The secondary mechanism is to consult the environment variable <code class="env">LD_LIBRARY_PATH</code>. The R script controls that variable, and sets it to the concatenation of <code class="env">R_LD_LIBRARY_PATH</code>, <code class="env">R_JAVA_LD_LIBRARY_PATH</code> and the environment value of <code class="env">LD_LIBRARY_PATH</code>. The first two have defaults which are normally set when R is installed (but can be overridden in the environment) so <code class="env">LD_LIBRARY_PATH</code> is the best choice for a user to set.</p>
<p>On macOS the primary mechanism is to embed the absolute path to dependent dynamic libraries into an object when it is compiled. Few R packages arrange to do so, but it can be edited<a href="#FOOT35" id="DOCF35" class="footnote"><sup>35</sup></a> <em>via</em> <code class="command">install_name_tool</code> — that only deals with direct dependencies and those would also need to be compiled to include the absolute paths of their dependencies. If the choice of absolute path is to be deferred to load time, how they are resolved is described in <code class="command">man dyld</code>: the role of <code class="env">LD_LIBRARY_PATH</code> is replaced on macOS by <code class="env">DYLD_LIBRARY_PATH</code> and <code class="env">DYLD_FALLBACK_LIBRARY_PATH</code>. Running <code class="command">R CMD otool -L</code> on the package shared object will show where (if anywhere) its dependencies are resolved. <code class="env">DYLD_FALLBACK_LIBRARY_PATH</code> is preferred (and it is that which is manipulated by the R script), but as from 10.11 (‘El Capitan’) the default behaviour had been changed for security reasons to discard these environment variables when invoking a shell script (and <samp class="file">R</samp> is a shell script). That makes the only portable option to set <code class="env">R_LD_LIBRARY_PATH</code> in the environment, something like</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode c code-with-copy"><code class="sourceCode c"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>export R_LD_LIBRARY_PATH<span class="op">=</span><span class="st">"`R RHOME`/lib:/opt/local/lib"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The precise rules for where Windows looks for DLLs are complex and depend on the version of Windows. But for present purposes the main solution is to put the directories containing the DLLs the package links to (and any those DLLs link to) on the <code class="env">PATH</code>.</p>
<p>The danger with any of the methods which involve setting environment variables is of inadvertently masking a system library. This is less for <code class="env">DYLD_FALLBACK_LIBRARY_PATH</code> and for <em>appending</em> to <code class="env">PATH</code> on Windows (as it should already contain the system library paths).</p>
</section>
</section>
<section id="updating-packages" class="level2 section" data-number="6.4">
<h2 class="section anchored" data-number="6.4" data-anchor-id="updating-packages"><span class="header-section-number">6.4</span> Updating packages</h2>
<p>The command <code class="code">update.packages()</code> is the simplest way to ensure that all the packages on your system are up to date. It downloads the list of available packages and their current versions, compares it with those installed and offers to fetch and install any that have later versions on the repositories.</p>
<p>An alternative interface to keeping packages up-to-date is provided by the command <code class="code">packageStatus()</code>, which returns an object with information on all installed packages and packages available at multiple repositories. The <code class="code">print</code> and <code class="code">summary</code> methods give an overview of installed and available packages, the <code class="code">upgrade</code> method offers to fetch and install the latest versions of outdated packages.</p>
<p>One sometimes-useful additional piece of information that <code class="code">packageStatus()</code> returns is the status of a package, as <code class="code">"ok"</code>, <code class="code">"upgrade"</code> or <code class="code">"unavailable"</code> (in the currently selected repositories). For example</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> inst <span class="ot">&lt;-</span> <span class="fu">packageStatus</span>()<span class="sc">$</span>inst</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> inst[inst<span class="sc">$</span>Status <span class="sc">!=</span> <span class="st">"ok"</span>, <span class="fu">c</span>(<span class="st">"Package"</span>, <span class="st">"Version"</span>, <span class="st">"Status"</span>)]</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>                  Package Version      Status</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>Biobase           Biobase   <span class="dv">2</span>.<span class="fl">8.0</span> unavailable</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>RCurl               RCurl   <span class="fl">1.4</span><span class="dv">-2</span>     upgrade</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>Rgraphviz       Rgraphviz  <span class="dv">1</span>.<span class="fl">26.0</span> unavailable</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>rgdal               rgdal  <span class="fl">0.6</span><span class="dv">-27</span>     upgrade</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="removing-packages" class="level2 section" data-number="6.5">
<h2 class="section anchored" data-number="6.5" data-anchor-id="removing-packages"><span class="header-section-number">6.5</span> Removing packages</h2>
<p>Packages can be removed in a number of ways. From a command prompt they can be removed by</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">R</span> CMD REMOVE <span class="at">-l</span> /path/to/library pkg1 pkg2 ...</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>From a running R process they can be removed by</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">remove.packages</span>(<span class="fu">c</span>(<span class="st">"pkg1"</span>, <span class="st">"pkg2"</span>),</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">lib =</span> <span class="fu">file.path</span>(<span class="st">"path"</span>, <span class="st">"to"</span>, <span class="st">"library"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Finally, one can just remove the package directory from the library.</p>
</section>
<section id="setting-up-a-package-repository" class="level2 section" data-number="6.6">
<h2 class="section anchored" data-number="6.6" data-anchor-id="setting-up-a-package-repository"><span class="header-section-number">6.6</span> Setting up a package repository</h2>
<p>Utilities such as <code class="code">install.packages</code> can be pointed at any CRAN-style repository, and R users may want to set up their own. The ‘base’ of a repository is a URL such as <a href="https://www.stats.ox.ac.uk/pub/RWin/" class="uref">https://www.stats.ox.ac.uk/pub/RWin/</a>: this must be an URL scheme that <code class="code">download.packages</code> supports (which also includes <samp class="samp">https://</samp>‘, <samp class="samp">ftp://</samp>’ and <samp class="samp">file://</samp>’). Under that base URL there should be directory trees for one or more of the following types of package distributions:</p>
<ul>
<li><code class="code">"source"</code>: located at <samp class="file">src/contrib</samp> and containing <samp class="file">.tar.gz</samp> files. Other forms of compression can be used, e.g.&nbsp;<samp class="file">.tar.bz2</samp> or <samp class="file">.tar.xz</samp> files. Complete repositories contain the sources corresponding to any binary packages, and in any case it is wise to have a <samp class="file">src/contrib</samp> area with a possibly empty <samp class="file">PACKAGES</samp> file.</li>
<li><code class="code">"binary"</code>: binary packages are located under <samp class="file">bin/</samp><var class="var">os</var><samp class="file">/</samp><var class="var">build</var><samp class="file">/contrib/</samp><var class="var">x.y</var> for R versions <var class="var">x.y.z</var>, where <var class="var">os</var> is either <samp class="file">windows</samp> for Windows or <samp class="file">macosx</samp> for macOS and OS X. The <var class="var">build</var> variable is defined by the third part of the <code class="code">type</code> value after <code class="code">binary</code> and may be empty. For example, in R 4.4.1 <code class="code">"mac.binary.big-sur-arm64"</code> specifies the <samp class="file">bin/macosx/big-sur-arm64/4.4</samp> location, while <code class="code">"win.binary"</code> specifies <samp class="file">bin/windows/contrib/4.4</samp>. The platform and build specification in CRAN R binaries can be obtained from <code class="code">.Platform$pkgType</code>. Windows binary package files use <samp class="file">.zip</samp> extension while Mac files use <samp class="file">.tgz</samp>.</li>
</ul>
<p>Each terminal directory must also contain a <samp class="file">PACKAGES</samp> file. This can be a concatenation of the <samp class="file">DESCRIPTION</samp> files of the packages separated by blank lines, but only a few of the fields are needed. The simplest way to set up such a file is to use function <code class="code">write_PACKAGES</code> in the <strong>tools</strong> package, and its help explains which fields are needed. Optionally there can also be <samp class="file">PACKAGES.rds</samp> and <samp class="file">PACKAGES.gz</samp> files, downloaded in preference to <samp class="file">PACKAGES</samp>. (If you have a mis-configured server that does not report correctly non-existent files you may need these files.)</p>
<p>To add your repository to the list offered by <code class="code">setRepositories()</code>, see the help file for that function.</p>
<p>Incomplete repositories are better specified <em>via</em> a <code class="code">contriburl</code> argument than <em>via</em> being set as a repository.</p>
<p>A repository can contain subdirectories, when the descriptions in the <samp class="file">PACKAGES</samp> file of packages in subdirectories must include a line of the form</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>Path<span class="sc">:</span> path<span class="sc">/</span>to<span class="sc">/</span>subdirectory</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>—once again <code class="code">write_PACKAGES</code> is the simplest way to set this up.</p>
</section>
<section id="checking-installed-source-packages" class="level2 section" data-number="6.7">
<h2 class="section anchored" data-number="6.7" data-anchor-id="checking-installed-source-packages"><span class="header-section-number">6.7</span> Checking installed source packages</h2>
<p>It can be convenient to run <code class="command">R CMD check</code> on an installed package, particularly on a platform which uses sub-architectures. The outline of how to do this is, with the source package in directory <var class="var">pkg</var> (or a tarball filename):</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">R</span> CMD INSTALL <span class="at">-l</span> libdir pkg <span class="op">&gt;</span> pkg.log <span class="dv">2</span><span class="op">&gt;&amp;</span><span class="dv">1</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="ex">R</span> CMD check <span class="at">-l</span> libdir <span class="at">--install</span><span class="op">=</span>check:pkg.log pkg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Where sub-architectures are in use the <code class="command">R CMD check</code> line can be repeated with additional architectures by</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>R <span class="sc">--</span>arch arch CMD check <span class="sc">-</span>l libdir <span class="sc">--</span>extra<span class="sc">-</span>arch <span class="sc">--</span>install<span class="ot">=</span>check<span class="sc">:</span>pkg.log pkg</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>where <samp class="option">--extra-arch</samp> selects only those checks which depend on the installed code and not those which analyse the sources. (If multiple sub-architectures fail only because they need different settings, e.g.&nbsp;environment variables, <samp class="option">--no-multiarch</samp> may need to be added to the <code class="code">INSTALL</code> lines.) On Unix-alikes the architecture to run is selected by <samp class="option">--arch</samp>: this can also be used on Windows with <var class="var">R_HOME</var><samp class="file">/bin/R.exe</samp>, but it is more usual to select the path to the <code class="command">Rcmd.exe</code> of the desired architecture.</p>
<p>So on Windows to install, check and package for distribution a source package from a tarball which has been tested on another platform one might use</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>...<span class="sc">/</span>bin<span class="sc">/</span>x64<span class="sc">/</span>Rcmd INSTALL <span class="sc">-</span>l libdir tarball <span class="sc">--</span>build <span class="sc">&gt;</span> pkg.log <span class="dv">2</span><span class="sc">&gt;</span><span class="er">&amp;</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./Running-R.html" class="pagination-link" aria-label="Running R">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Running R</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./Internationalization.html" class="pagination-link" aria-label="Internationalization and Localization">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Internationalization and Localization</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>A re-styled version of the original R manuals at <a href="https://cran.r-project.org/manuals.html" class="uri">https://cran.r-project.org/manuals.html</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Built using <a href="https://quarto.org">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>